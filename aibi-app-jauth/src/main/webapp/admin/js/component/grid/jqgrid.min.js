(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{htmlDecode:function(a){return a=="&nbsp;"||a=="&#160;"||a.length==1&&a.charCodeAt(0)==160?"":!a?a:String(a).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"')},htmlEncode:function(a){return!a?a:String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;")},format:function(b){var c=a.makeArray(arguments).slice(1);if(b===undefined)b="";return b.replace(/\{(\d+)\}/g,function(b,a){return c[a]})},getCellIndex:function(c){var b=a(c);if(b.is("tr"))return-1;b=(!b.is("td")&&!b.is("th")?b.closest("td,th"):b)[0];return a.browser.msie?a.inArray(b,b.parentNode.cells):b.cellIndex},stripHtml:function(a){a=a+"";var b=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(a){a=a.replace(b,"");return a&&a!=="&nbsp;"&&a!=="&#160;"?a.replace(/\"/g,"'"):""}else return a},stringToDoc:function(b){var a;if(typeof b!=="string")return b;try{var c=new DOMParser;a=c.parseFromString(b,"text/xml")}catch(d){a=new ActiveXObject("Microsoft.XMLDOM");a.async=false;a.loadXML(b)}return a&&a.documentElement&&a.documentElement.tagName!="parsererror"?a:null},parse:function(c){var b=c;if(b.substr(0,9)=="while(1);")b=b.substr(9);if(b.substr(0,2)=="/*")b=b.substr(2,b.length-4);if(!b)b="{}";return a.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function"?JSON.parse(b):eval("("+b+")")},parseDate:function(f,c){var d={m:1,d:1,y:1970,h:0,i:0,s:0},b,k,e;if(c&&c!==null&&c!==undefined){c=a.trim(c);c=c.split(/[\\\/:_;.\t\T\s-]/);f=f.split(/[\\\/:_;.\t\T\s-]/);var j=a.jgrid.formatter.date.monthNames,g=a.jgrid.formatter.date.AmPm,i=function(b,a){if(b===0){if(a==12)a=0}else if(a!=12)a+=12;return a};for(b=0,k=f.length;b<k;b++){if(f[b]=="M"){e=a.inArray(c[b],j);if(e!==-1&&e<12)c[b]=e+1}if(f[b]=="F"){e=a.inArray(c[b],j);if(e!==-1&&e>11)c[b]=e+1-12}if(f[b]=="a"){e=a.inArray(c[b],g);if(e!==-1&&e<2&&c[b]==g[e]){c[b]=e;d.h=i(c[b],d.h)}}if(f[b]=="A"){e=a.inArray(c[b],g);if(e!==-1&&e>1&&c[b]==g[e]){c[b]=e-2;d.h=i(c[b],d.h)}}if(c[b]!==undefined)d[f[b].toLowerCase()]=parseInt(c[b],10)}d.m=parseInt(d.m,10)-1;var h=d.y;if(h>=70&&h<=99)d.y=1900+d.y;else if(h>=0&&h<=69)d.y=2e3+d.y}return new Date(d.y,d.m,d.d,d.h,d.i,d.s,0)},jqID:function(a){a=a+"";return a.replace(/([\.\:\[\]])/g,"\\$1")},getAccessor:function(c,b){var a,f,d,e;if(typeof b==="function")return b(c);a=c[b];if(a===undefined)try{if(typeof b==="string")d=b.split(".");e=d.length;if(e){a=c;while(a&&e--){f=d.shift();a=a[f]}}}catch(g){}return a},ajaxOptions:{},from:function(c){var b=function(f,o){if(typeof f=="string")f=a.data(f);var b=this,c=f,k=true,e=false,i=o,n=/[\$,%]/g,j=null,m=null,d=false,l="",h=[],g=true;if(typeof f=="object"&&f.push){if(f.length>0)if(typeof f[0]!="object")g=false;else g=true}else throw"data provides is not an array";this._hasData=function(){return c===null?false:c.length===0?false:true};this._getStr=function(b){var a=[];e&&a.push("jQuery.trim(");a.push("String("+b+")");e&&a.push(")");!k&&a.push(".toLowerCase()");return a.join("")};this._strComp=function(a){return typeof a=="string"?".toString()":""};this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(b){if(e)b=a.trim(b);if(!k)b=b.toLowerCase();b=b.toString().replace(new RegExp('\\"',"g"),'\\"');return b};this._funcLoop=function(d){var b=[];a.each(c,function(c,a){b.push(d(a))});return b};this._append=function(a){if(i===null)i="";else i+=l===""?" && ":l;if(d)i+="!";i+="("+a+")";d=false;l=""};this._setCommand=function(b,a){j=b;m=a};this._resetNegate=function(){d=false};this._repeatCommand=function(a,c){return j===null?b:a!=null&&c!=null?j(a,c):m===null?j(a):!g?j(a):j(m,a)};this._equals=function(a,c){return b._compare(a,c,1)===0};this._compare=function(a,b,c){if(c===undefined)c=1;if(a===undefined)a=null;if(b===undefined)b=null;if(a===null&&b===null)return 0;if(a===null&&b!==null)return 1;if(a!==null&&b===null)return-1;if(!k&&typeof a!=="number"&&typeof b!=="number"){a=String(a).toLowerCase();b=String(b).toLowerCase()}return a<b?-c:a>b?c:0};this._performSort=function(){if(h.length===0)return;c=b._doSort(c,0)};this._doSort=function(m,a){var l=h[a].by,k=h[a].dir,j=h[a].type,i=h[a].datefmt;if(a==h.length-1)return b._getOrder(m,l,k,j,i);a++;for(var g=b._getGroup(m,l,k,j,i),e=[],c=0;c<g.length;c++)for(var f=b._doSort(g[c].items,a),d=0;d<f.length;d++)e.push(f[d]);return e};this._getOrder=function(h,j,p,c,m){var i=[],g=[],l=p=="a"?1:-1,k,e,f,d;if(c===undefined)c="text";if(c=="float"||c=="number"||c=="currency"||c=="numeric")d=function(b){var a=parseFloat(String(b).replace(n,""));return isNaN(a)?0:a};else if(c=="int"||c=="integer")d=function(a){return a?parseFloat(String(a).replace(n,"")):0};else if(c=="date"||c=="datetime")d=function(b){return a.jgrid.parseDate(m,b).getTime()};else if(a.isFunction(c))d=c;else d=function(b){if(!b)b="";return a.trim(String(b).toUpperCase())};a.each(h,function(c,b){e=j!==""?a.jgrid.getAccessor(b,j):b;if(e===undefined)e="";e=d(e,b);g.push({vSort:e,index:c})});g.sort(function(a,c){a=a.vSort;c=c.vSort;return b._compare(a,c,l)});f=0;var o=h.length;while(f<o){k=g[f].index;i.push(h[k]);f++}return i};this._getGroup=function(h,f,k,j,i){var e=[],c=null,g=null,d;a.each(b._getOrder(h,f,k,j,i),function(i,h){d=a.jgrid.getAccessor(h,f);if(d===undefined)d="";if(!b._equals(g,d)){g=d;c!=null&&e.push(c);c=b._group(f,d)}c.items.push(h)});c!=null&&e.push(c);return e};this.ignoreCase=function(){k=false;return b};this.useCase=function(){k=true;return b};this.trim=function(){e=true;return b};this.noTrim=function(){e=false;return b};this.combine=function(g){var d=a.from(c);!k&&d.ignoreCase();e&&d.trim();var f=g(d).showQuery();b._append(f);return b};this.execute=function(){var e=i,d=[];if(e===null)return b;a.each(c,function(){eval(e)&&d.push(this)});c=d;return b};this.data=function(){return c};this.select=function(e){b._performSort();if(!b._hasData())return[];b.execute();if(a.isFunction(e)){var d=[];a.each(c,function(b,a){d.push(e(a))});return d}return c};this.hasMatch=function(){if(!b._hasData())return false;b.execute();return c.length>0};this.showQuery=function(d){var c=i;if(c===null)c="no query found";if(a.isFunction(d)){d(c);return b}return c};this.andNot=function(a,c,e){d=!d;return b.and(a,c,e)};this.orNot=function(a,c,e){d=!d;return b.or(a,c,e)};this.not=function(a,c,d){return b.andNot(a,c,d)};this.and=function(a,c,d){l=" && ";return a===undefined?b:b._repeatCommand(a,c,d)};this.or=function(a,c,d){l=" || ";return a===undefined?b:b._repeatCommand(a,c,d)};this.isNot=function(a){d=!d;return b.is(a)};this.is=function(a){b._append("this."+a);b._resetNegate();return b};this._compareValues=function(i,h,f,k,e){var d;if(g)d="this."+h;else d="this";if(f===undefined)f=null;var c=f===null?h:f,j=e.stype===undefined?"text":e.stype;switch(j){case"int":case"integer":c=isNaN(Number(c))?"0":c;d="parseInt("+d+",10)";c="parseInt("+c+",10)";break;case"float":case"number":case"numeric":c=String(c).replace(n,"");c=isNaN(Number(c))?"0":c;d="parseFloat("+d+")";c="parseFloat("+c+")";break;case"date":case"datetime":c=String(a.jgrid.parseDate(e.newfmt||"Y-m-d",c).getTime());d='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+d+").getTime()";break;default:d=b._getStr(d);c=b._getStr('"'+b._toStr(c)+'"')}b._append(d+" "+k+" "+c);b._setCommand(i,h);b._resetNegate();return b};this.equals=function(a,d,c){return b._compareValues(b.equals,a,d,"==",c)};this.greater=function(a,d,c){return b._compareValues(b.greater,a,d,">",c)};this.less=function(a,d,c){return b._compareValues(b.less,a,d,"<",c)};this.greaterOrEquals=function(a,d,c){return b._compareValues(b.greaterOrEquals,a,d,">=",c)};this.lessOrEquals=function(a,d,c){return b._compareValues(b.lessOrEquals,a,d,"<=",c)};this.startsWith=function(d,c){var h=c===undefined||c===null?d:c,f=e?a.trim(h.toString()).length:h.toString().length;if(g)b._append(b._getStr("this."+d)+".substr(0,"+f+") == "+b._getStr('"'+b._toStr(c)+'"'));else{f=e?a.trim(c.toString()).length:c.toString().length;b._append(b._getStr("this")+".substr(0,"+f+") == "+b._getStr('"'+b._toStr(d)+'"'))}b._setCommand(b.startsWith,d);b._resetNegate();return b};this.endsWith=function(c,d){var h=d===undefined||d===null?c:d,f=e?a.trim(h.toString()).length:h.toString().length;if(g)b._append(b._getStr("this."+c)+".substr("+b._getStr("this."+c)+".length-"+f+","+f+') == "'+b._toStr(d)+'"');else b._append(b._getStr("this")+".substr("+b._getStr("this")+'.length-"'+b._toStr(c)+'".length,"'+b._toStr(c)+'".length) == "'+b._toStr(c)+'"');b._setCommand(b.endsWith,c);b._resetNegate();return b};this.contains=function(a,c){if(g)b._append(b._getStr("this."+a)+'.indexOf("'+b._toStr(c)+'",0) > -1');else b._append(b._getStr("this")+'.indexOf("'+b._toStr(a)+'",0) > -1');b._setCommand(b.contains,a);b._resetNegate();return b};this.groupBy=function(f,e,d,a){return!b._hasData()?null:b._getGroup(c,f,e,d,a)};this.orderBy=function(f,c,d,e){c=c===undefined||c===null?"a":a.trim(c.toString().toLowerCase());if(d===null||d===undefined)d="text";if(e===null||e===undefined)e="Y-m-d";if(c=="desc"||c=="descending")c="d";if(c=="asc"||c=="ascending")c="a";h.push({by:f,dir:c,type:d,datefmt:e});return b};return b};return new b(c,null)},extend:function(b){a.extend(a.fn.jqGrid,b);!this.no_legacy_api&&a.fn.extend(b)}});a.fn.jqGrid=function(b){if(typeof b=="string"){var c=a.jgrid.getAccessor(a.fn.jqGrid,b);if(!c)throw"jqGrid - No such method: "+b;var d=a.makeArray(arguments).slice(1);return c.apply(this,d)}return this.each(function(){if(this.grid)return;var e=a.extend(true,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:25,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:false,headertitles:false,scrollTimeout:40,data:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],groupDataSorted:false,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:false,cmTemplate:{}},a.jgrid.defaults,b||{}),d={headers:[],cols:[],footers:[],dragStart:function(c,d,b){this.resizing={idx:c,startX:d.clientX,sOL:b[0]};this.hDiv.style.cursor="col-resize";this.curGbox=a("#rs_m"+e.id,"#gbox_"+e.id);this.curGbox.css({display:"block",left:b[0],top:b[1],height:b[2]});a.isFunction(e.resizeStart)&&e.resizeStart.call(this,d,c);document.onselectstart=function(){return false}},dragMove:function(g){if(this.resizing){var a=g.clientX-this.resizing.startX,c=this.headers[this.resizing.idx],d=e.direction==="ltr"?c.width+a:c.width-a,b,f;if(d>33){this.curGbox.css({left:this.resizing.sOL+a});if(e.forceFit===true){b=this.headers[this.resizing.idx+e.nv];f=e.direction==="ltr"?b.width-a:b.width+a;if(f>33){c.newWidth=d;b.newWidth=f}}else{this.newWidth=e.direction==="ltr"?e.tblwidth+a:e.tblwidth-a;c.newWidth=d}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var b=this.resizing.idx,c=this.headers[b].newWidth||this.headers[b].width;c=parseInt(c,10);this.resizing=false;a("#rs_m"+e.id).css("display","none");e.colModel[b].width=c;this.headers[b].width=c;this.headers[b].el.style.width=c+"px";this.cols[b].style.width=c+"px";if(this.footers.length>0)this.footers[b].style.width=c+"px";if(e.forceFit===true){c=this.headers[b+e.nv].newWidth||this.headers[b+e.nv].width;this.headers[b+e.nv].width=c;this.headers[b+e.nv].el.style.width=c+"px";this.cols[b+e.nv].style.width=c+"px";if(this.footers.length>0)this.footers[b+e.nv].style.width=c+"px";e.colModel[b+e.nv].width=c}else{e.tblwidth=this.newWidth||e.tblwidth;a("table:first",this.bDiv).css("width",e.tblwidth+"px");a("table:first",this.hDiv).css("width",e.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(e.footerrow){a("table:first",this.sDiv).css("width",e.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}a.isFunction(e.resizeStop)&&e.resizeStop.call(this,c,b)}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){d.timer&&clearTimeout(d.timer);d.timer=null;var k=a(d.bDiv).height();if(!k)return;var j=a("table:first",d.bDiv),n=a("> tbody > tr:gt(0):visible:first",j),l=n.outerHeight()||d.prevRowHeight;if(!l)return;d.prevRowHeight=l;var o=e.rowNum,c=d.scrollTop=d.bDiv.scrollTop,i=Math.round(j.position().top)-c,h=i+j.height(),b=l*o,g,f,m;if(h<k&&i<=0&&(e.lastpage===undefined||parseInt((h+c+b-1)/b,10)<=e.lastpage)){f=parseInt((k-h+b-1)/b,10);if(h>=0||f<2||e.scroll===true){g=Math.round((h+c)/b)+1;i=-1}else i=1}if(i>0){g=parseInt(c/b,10)+1;f=parseInt((c+k)/b,10)+2-g;m=true}if(f){if(e.lastpage&&g>e.lastpage||e.lastpage==1)return;if(d.hDiv.loading)d.timer=setTimeout(d.populateVisible,e.scrollTimeout);else{e.page=g;if(m){d.selectionPreserver(j[0]);d.emptyRows(d.bDiv,false)}d.populate(f)}}},scrollGrid:function(){if(e.scroll){var a=d.bDiv.scrollTop;if(d.scrollTop===undefined)d.scrollTop=0;if(a!=d.scrollTop){d.scrollTop=a;d.timer&&clearTimeout(d.timer);d.timer=setTimeout(d.populateVisible,e.scrollTimeout)}}d.hDiv.scrollLeft=d.bDiv.scrollLeft;if(e.footerrow)d.sDiv.scrollLeft=d.bDiv.scrollLeft},selectionPreserver:function(d){var b=d.p,e=b.selrow,c=b.selarrrow?a.makeArray(b.selarrrow):null,g=d.grid.bDiv.scrollLeft,f=b.gridComplete;b.gridComplete=function(){b.selrow=null;b.selarrrow=[];if(b.multiselect&&c&&c.length>0)for(var h=0;h<c.length;h++)c[h]!=e&&a(d).jqGrid("setSelection",c[h],false);e&&a(d).jqGrid("setSelection",e,false);d.grid.bDiv.scrollLeft=g;b.gridComplete=f;b.gridComplete&&f()}}};if(b.rowList&&jQuery.isArray(b.rowList))e.rowList=b.rowList;if(this.tagName!="TABLE"){alert("Element is not a table");return}a(this).empty();this.p=e;var f,h,c,G;if(this.p.colNames.length===0)for(f=0;f<this.p.colModel.length;f++)this.p.colNames[f]=this.p.colModel[f].label||this.p.colModel[f].name;if(this.p.colNames.length!==this.p.colModel.length){alert(a.jgrid.errors.model);return}var o=a("<div class='ui-jqgrid-view'></div>"),N,B=a.browser.msie?true:false,J=a.browser.safari?true:false;c=this;c.p.direction=a.trim(c.p.direction.toLowerCase());if(a.inArray(c.p.direction,["ltr","rtl"])==-1)c.p.direction="ltr";h=c.p.direction;a(o).insertBefore(this);a(this).appendTo(o).removeClass("scroll");var w=a("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");a(w).insertBefore(o).attr({id:"gbox_"+this.id,dir:h});a(o).appendTo(w).attr("id","gview_"+this.id);if(B&&a.browser.version<=6)N='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>';else N="";a("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(N).insertBefore(o);a("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(o);a(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var ib=["shiftKey","altKey","ctrlKey"],u=function(a,b){a=parseInt(a,10);return isNaN(a)?b?b:0:a},s=function(g,j,i){var e=c.p.colModel[g],h=e.align,b='style="',f=e.classes,k=e.name;if(h)b+="text-align:"+h+";";if(e.hidden===true)b+="display:none;";if(j===0)b+="width: "+d.headers[g].width+"px;";b+='"'+(f!==undefined?' class="'+f+'"':"")+(e.title&&i?' title="'+a.jgrid.stripHtml(i)+'"':"");b+=' aria-describedby="'+c.p.id+"_"+k+'"';return b},T=function(b){return b===undefined||b===null||b===""?"&#160;":c.p.autoencode?a.jgrid.htmlEncode(b):b+""},P=function(j,e,f,g,i){var b=c.p.colModel[f],d;if(typeof b.formatter!=="undefined"){var h={rowId:j,colModel:b,gid:c.p.id,pos:f};if(a.isFunction(b.formatter))d=b.formatter.call(c,e,h,g,i);else if(a.fmatter)d=a.fn.fmatter(b.formatter,e,h,g,i);else d=T(e)}else d=T(e);return d},K=function(d,e,b,f,g){var a,c;a=P(d,e,b,g,"add");c=s(b,f,a);return'<td role="gridcell" '+c+">"+a+"</td>"},Q=function(a,d,b){var f='<input role="checkbox" type="checkbox" id="jqg_'+c.p.id+"_"+a+'" class="cbox" name="jqg_'+c.p.id+"_"+a+'"/>',e=s(d,b,"");return'<td role="gridcell" '+e+">"+f+"</td>"},O=function(b,a,d,e){var f=(parseInt(d,10)-1)*parseInt(e,10)+1+a,c=s(b,a,"");return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+c+">"+f+"</td>"},V=function(f){for(var a,b=[],e=0,d=0;d<c.p.colModel.length;d++){a=c.p.colModel[d];if(a.name!=="cb"&&a.name!=="subgrid"&&a.name!=="rn"){if(f=="local")b[e]=a.name;else b[e]=f=="xml"?a.xmlmap||a.name:a.jsonmap||a.name;e++}}return b},y=function(d){var b=c.p.remapColumns;if(!b||!b.length)b=a.map(c.p.colModel,function(b,a){return a});if(d)b=a.map(b,function(a){return a<d?null:a-d});return b},r=function(b,d){if(c.p.deepempty)a("#"+c.p.id+" tbody:first tr:gt(0)").remove();else{var e=a("#"+c.p.id+" tbody:first tr:first")[0];a("#"+c.p.id+" tbody:first").empty().append(e)}if(d&&c.p.scroll){a(">div:first",b).css({height:"auto"}).children("div:first").css({height:0,display:"none"});b.scrollTop=0}},q=function(){var f=c.p.data.length,d,b,e,h=c.p.rownumbers===true?1:0,g=c.p.multiselect===true?1:0,i=c.p.subGrid===true?1:0;if(c.p.keyIndex===false||c.p.loadonce===true)d=c.p.localReader.id;else d=c.p.colModel[c.p.keyIndex+g+i+h].name;for(b=0;b<f;b++){e=a.jgrid.getAccessor(c.p.data[b],d);c.p._index[e]=b}},I=function(t,D,l,T,H){var N=new Date,z=c.p.datatype!="local"&&c.p.loadonce||c.p.datatype=="xmlstring",B,U=c.p.datatype=="local"?"local":"xml";if(z){c.p.data=[];c.p._index={};c.p.localReader.id=B="_id_"}c.p.reccount=0;if(a.isXMLDoc(t))if(c.p.treeANode===-1&&!c.p.scroll){r(D,false);l=1}else l=l>1?l:1;else return;var i,J,o=0,k,C,h=0,n=0,e=0,g,w,p=[],v,d={},f,m,b=[],X=c.p.altRows===true?" "+c.p.altclass:"",L;if(!c.p.xmlReader.repeatitems)p=V(U);if(c.p.keyIndex===false)g=c.p.xmlReader.id;else g=c.p.keyIndex;if(p.length>0&&!isNaN(g)){if(c.p.remapColumns&&c.p.remapColumns.length)g=a.inArray(g,c.p.remapColumns);g=p[g]}if((g+"").indexOf("[")===-1)if(p.length)w=function(b,c){return a(g,b).text()||c};else w=function(b,d){return a(c.p.xmlReader.cell,b).eq(g).text()||d};else w=function(a,b){return a.getAttribute(g.replace(/[\[\]]/g,""))||b};c.p.userData={};a(c.p.xmlReader.page,t).each(function(){c.p.page=this.textContent||this.text||0});a(c.p.xmlReader.total,t).each(function(){c.p.lastpage=this.textContent||this.text;if(c.p.lastpage===undefined)c.p.lastpage=1});a(c.p.xmlReader.records,t).each(function(){c.p.records=this.textContent||this.text||0});a(c.p.xmlReader.userdata,t).each(function(){c.p.userData[this.getAttribute("name")]=this.textContent||this.text});var s=a(c.p.xmlReader.root+" "+c.p.xmlReader.row,t);if(!s)s=[];var u=s.length,j=0;if(s&&u){var A=parseInt(c.p.rowNum,10),W=c.p.scroll?(parseInt(c.p.page,10)-1)*A+1:1,I;if(H)A*=H+1;var M=a.isFunction(c.p.afterInsertRow),x={},G="";if(c.p.grouping&&c.p.groupingView.groupCollapse===true)G=' style="display:none;"';while(j<u){f=s[j];m=w(f,W+j);I=l===0?0:l+1;L=(I+j)%2==1?X:"";b.push("<tr"+G+' id="'+m+'" role="row" class ="ui-widget-content jqgrow ui-row-'+c.p.direction+""+L+'">');if(c.p.rownumbers===true){b.push(O(0,j,c.p.page,c.p.rowNum));e=1}if(c.p.multiselect===true){b.push(Q(m,e,j));h=1}if(c.p.subGrid===true){b.push(a(c).jqGrid("addSubGridCell",h+e,j+l));n=1}if(c.p.xmlReader.repeatitems){if(!v)v=y(h+n+e);var R=a(c.p.xmlReader.cell,f);a.each(v,function(g){var a=R[this];if(!a)return false;k=a.textContent||a.text;d[c.p.colModel[g+h+n+e].name]=k;b.push(K(m,k,g+h+n+e,j+l,f))})}else for(i=0;i<p.length;i++){k=a(p[i],f).text();d[c.p.colModel[i+h+n+e].name]=k;b.push(K(m,k,i+h+n+e,j+l,f))}b.push("</tr>");if(c.p.grouping){for(var S=c.p.groupingView.groupField.length,F=[],E=0;E<S;E++)F.push(d[c.p.groupingView.groupField[E]]);x=a(c).jqGrid("groupingPrepare",b,F,x,d);b=[]}if(z){d[B]=m;c.p.data.push(d)}if(c.p.gridview===false){if(c.p.treeGrid===true){J=c.p.treeANode>-1?c.p.treeANode:0;C=a(b.join(""))[0];a(c.rows[j+J]).after(C);try{a(c).jqGrid("setTreeNode",d,C)}catch(Y){}}else a("tbody:first",D).append(b.join(""));if(c.p.subGrid===true)try{a(c).jqGrid("addSubGrid",c.rows[c.rows.length-1],h+e)}catch(Z){}M&&c.p.afterInsertRow.call(c,m,d,f);b=[]}d={};o++;j++;if(o==A)break}}if(c.p.gridview===true)if(c.p.grouping){a(c).jqGrid("groupingRender",x,c.p.colModel.length);x=null}else a("tbody:first",D).append(b.join(""));c.p.totaltime=new Date-N;if(o>0)if(c.p.records===0)c.p.records=u;b=null;if(!c.p.treeGrid&&!c.p.scroll)c.grid.bDiv.scrollTop=0;c.p.reccount=o;c.p.treeANode=-1;c.p.userDataOnFooter&&a(c).jqGrid("footerData","set",c.p.userData,true);if(z){c.p.records=u;c.p.lastpage=Math.ceil(u/A)}!T&&c.updatepager(false,true);if(z){while(o<u){f=s[o];m=w(f,o);if(c.p.xmlReader.repeatitems){if(!v)v=y(h+n+e);var P=a(c.p.xmlReader.cell,f);a.each(v,function(b){var a=P[this];if(!a)return false;k=a.textContent||a.text;d[c.p.colModel[b+h+n+e].name]=k})}else for(i=0;i<p.length;i++){k=a(p[i],f).text();d[c.p.colModel[i+h+n+e].name]=k}d[B]=m;c.p.data.push(d);d={};o++}q()}},x=function(s,Y,m,W,I){var T=new Date;if(s)if(c.p.treeANode===-1&&!c.p.scroll){r(Y,false);m=1}else m=m>1?m:1;else return;var b,B,C,z=c.p.datatype!="local"&&c.p.loadonce||c.p.datatype=="jsonstring";if(z){c.p.data=[];c.p._index={};B=c.p.localReader.id="_id_"}c.p.reccount=0;if(c.p.datatype=="local"){b=c.p.localReader;C="local"}else{b=c.p.jsonReader;C="json"}var o=0,w,i,j,D,v=[],l,e,n=0,u=0,k=0,t,p,h,g={},N,d,f=[],X=c.p.altRows===true?" "+c.p.altclass:"",P,E;c.p.page=a.jgrid.getAccessor(s,b.page)||0;E=a.jgrid.getAccessor(s,b.total);c.p.lastpage=E===undefined?1:E;c.p.records=a.jgrid.getAccessor(s,b.records)||0;c.p.userData=a.jgrid.getAccessor(s,b.userdata)||{};if(!b.repeatitems)l=v=V(C);if(c.p.keyIndex===false)h=b.id;else h=c.p.keyIndex;if(v.length>0&&!isNaN(h)){if(c.p.remapColumns&&c.p.remapColumns.length)h=a.inArray(h,c.p.remapColumns);h=v[h]}p=a.jgrid.getAccessor(s,b.root);if(!p)p=[];t=p.length;i=0;var A=parseInt(c.p.rowNum,10),R=c.p.scroll?(parseInt(c.p.page,10)-1)*A+1:1,L;if(I)A*=I+1;var S=a.isFunction(c.p.afterInsertRow),x={},H="";if(c.p.grouping&&c.p.groupingView.groupCollapse===true)H=' style="display:none;"';while(i<t){e=p[i];d=a.jgrid.getAccessor(e,h);if(d===undefined){d=R+i;if(v.length===0)if(b.cell){var M=e[b.cell];d=M[h]||d;M=null}}L=m===1?0:m;P=(L+i)%2==1?X:"";f.push("<tr"+H+' id="'+d+'" role="row" class= "ui-widget-content jqgrow ui-row-'+c.p.direction+""+P+'">');if(c.p.rownumbers===true){f.push(O(0,i,c.p.page,c.p.rowNum));k=1}if(c.p.multiselect){f.push(Q(d,k,i));n=1}if(c.p.subGrid){f.push(a(c).jqGrid("addSubGridCell",n+k,i+m));u=1}if(b.repeatitems){if(b.cell)e=a.jgrid.getAccessor(e,b.cell);if(!l)l=y(n+u+k)}for(j=0;j<l.length;j++){w=a.jgrid.getAccessor(e,l[j]);f.push(K(d,w,j+n+u+k,i+m,e));g[c.p.colModel[j+n+u+k].name]=w}f.push("</tr>");if(c.p.grouping){for(var U=c.p.groupingView.groupField.length,G=[],F=0;F<U;F++)G.push(g[c.p.groupingView.groupField[F]]);x=a(c).jqGrid("groupingPrepare",f,G,x,g);f=[]}if(z){g[B]=d;c.p.data.push(g)}if(c.p.gridview===false){if(c.p.treeGrid===true){N=c.p.treeANode>-1?c.p.treeANode:0;D=a(f.join(""))[0];a(c.rows[i+N]).after(D);try{a(c).jqGrid("setTreeNode",g,D)}catch(Z){}}else a("#"+c.p.id+" tbody:first").append(f.join(""));if(c.p.subGrid===true)try{a(c).jqGrid("addSubGrid",c.rows[c.rows.length-1],n+k)}catch(ab){}S&&c.p.afterInsertRow.call(c,d,g,e);f=[]}g={};o++;i++;if(o==A)break}if(c.p.gridview===true)if(c.p.grouping){a(c).jqGrid("groupingRender",x,c.p.colModel.length);x=null}else a("#"+c.p.id+" tbody:first").append(f.join(""));c.p.totaltime=new Date-T;if(o>0)if(c.p.records===0)c.p.records=t;f=null;if(!c.p.treeGrid&&!c.p.scroll)c.grid.bDiv.scrollTop=0;c.p.reccount=o;c.p.treeANode=-1;c.p.userDataOnFooter&&a(c).jqGrid("footerData","set",c.p.userData,true);if(z){c.p.records=t;c.p.lastpage=Math.ceil(t/A)}!W&&c.updatepager(false,true);if(z){while(o<t){e=p[o];d=a.jgrid.getAccessor(e,h);if(d===undefined){d=R+o;if(v.length===0)if(b.cell){var J=e[b.cell];d=J[h]||d;J=null}}if(e){if(b.repeatitems){if(b.cell)e=a.jgrid.getAccessor(e,b.cell);if(!l)l=y(n+u+k)}for(j=0;j<l.length;j++){w=a.jgrid.getAccessor(e,l[j]);g[c.p.colModel[j+n+u+k].name]=w}g[B]=d;c.p.data.push(g);g={}}o++}q()}},db=function(){var f,o=false,b=[],q=[],u=[],m,j,l;if(!a.isArray(c.p.data))return;var p=c.p.grouping?c.p.groupingView:false;a.each(c.p.colModel,function(){j=this.sorttype||"text";if(j=="date"||j=="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter=="date"){if(this.formatoptions&&this.formatoptions.srcformat)m=this.formatoptions.srcformat;else m=a.jgrid.formatter.date.srcformat;if(this.formatoptions&&this.formatoptions.newformat)l=this.formatoptions.newformat;else l=a.jgrid.formatter.date.newformat}else m=l=this.datefmt||"Y-m-d";b[this.name]={stype:j,srcfmt:m,newfmt:l}}else b[this.name]={stype:j,srcfmt:"",newfmt:""};if(c.p.grouping&&this.name==p.groupField[0]){var d=this.name;if(typeof this.index!="undefined")d=this.index;q[0]=b[d];u.push(d)}if(!o&&(this.index==c.p.sortname||this.name==c.p.sortname)){f=this.name;o=true}});if(c.p.treeGrid){a(c).jqGrid("SortTree",f,c.p.sortorder,b[f].stype,b[f].srcfmt);return}var k={eq:function(a){return a.equals},ne:function(a){return a.not().equals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a){return a.not().contains},bw:function(a){return a.startsWith},bn:function(a){return a.not().startsWith},en:function(a){return a.not().endsWith},ew:function(a){return a.endsWith},ni:function(a){return a.not().equals},"in":function(a){return a.equals}},d=a.jgrid.from(c.p.data);if(c.p.ignoreCase)d=d.ignoreCase();if(c.p.search===true){var g=c.p.postData.filters,s;if(g){if(typeof g=="string")g=a.jgrid.parse(g);for(var t=0,x=g.rules.length,e;t<x;t++){e=g.rules[t];s=g.groupOp;if(k[e.op]&&e.field&&e.data&&s)if(s.toUpperCase()=="OR")d=k[e.op](d)(e.field,e.data,b[e.field]).or();else d=k[e.op](d)(e.field,e.data,b[e.field])}}else try{d=k[c.p.postData.searchOper](d)(c.p.postData.searchField,c.p.postData.searchString,b[c.p.postData.searchField])}catch(y){}}if(c.p.grouping){d.orderBy(u,p.groupOrder[0],q[0].stype,q[0].srcfmt);p.groupDataSorted=true}if(f&&c.p.sortorder&&o)if(c.p.sortorder.toUpperCase()=="DESC")d.orderBy(c.p.sortname,"d",b[f].stype,b[f].srcfmt);else d.orderBy(c.p.sortname,"a",b[f].stype,b[f].srcfmt);var h=d.select(),n=parseInt(c.p.rowNum,10),v=h.length,r=parseInt(c.p.page,10),w=Math.ceil(v/n),i={};h=h.slice((r-1)*n,r*n);d=null;b=null;i[c.p.localReader.total]=w;i[c.p.localReader.page]=r;i[c.p.localReader.records]=v;i[c.p.localReader.root]=h;h=null;return i},gb=function(p,o){var e,j,b,h,g,i,f,d="";b=parseInt(c.p.page,10)-1;if(b<0)b=0;b=b*parseInt(c.p.rowNum,10);g=b+c.p.reccount;if(c.p.scroll){var k=a("tbody:first > tr:gt(0)",c.grid.bDiv);b=g-k.length;c.p.reccount=k.length;var l=k.outerHeight()||c.grid.prevRowHeight;if(l){var m=b*l,n=parseInt(c.p.records,10)*l;a(">div:first",c.grid.bDiv).css({height:n}).children("div:first").css({height:m,display:m?"":"none"})}c.grid.bDiv.scrollLeft=c.grid.hDiv.scrollLeft}d=c.p.pager?c.p.pager:"";d+=c.p.toppager?d?","+c.p.toppager:c.p.toppager:"";if(d){f=a.jgrid.formatter.integer||{};e=u(c.p.page);j=u(c.p.lastpage);a(".selbox",d).attr("disabled",false);if(c.p.pginput===true){a(".ui-pg-input",d).val(c.p.page);a("#sp_1",d).html(a.fmatter?a.fmatter.util.NumberFormat(c.p.lastpage,f):c.p.lastpage)}if(c.p.viewrecords)if(c.p.reccount===0)a(".ui-paging-info",d).html(c.p.emptyrecords);else{h=b+1;i=c.p.records;if(a.fmatter){h=a.fmatter.util.NumberFormat(h,f);g=a.fmatter.util.NumberFormat(g,f);i=a.fmatter.util.NumberFormat(i,f)}a(".ui-paging-info",d).html(a.jgrid.format(c.p.recordtext,h,g,i))}if(c.p.pgbuttons===true){if(e<=0)e=j=0;if(e==1||e===0){a("#first, #prev",c.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover");c.p.toppager&&a("#first_t, #prev_t",c.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{a("#first, #prev",c.p.pager).removeClass("ui-state-disabled");c.p.toppager&&a("#first_t, #prev_t",c.p.toppager).removeClass("ui-state-disabled")}if(e==j||e===0){a("#next, #last",c.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover");c.p.toppager&&a("#next_t, #last_t",c.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{a("#next, #last",c.p.pager).removeClass("ui-state-disabled");c.p.toppager&&a("#next_t, #last_t",c.p.toppager).removeClass("ui-state-disabled")}}}p===true&&c.p.rownumbers===true&&a("td.jqgrid-rownum",c.rows).each(function(c){a(this).html(b+1+c)});o&&c.p.jqgdnd&&a(c).jqGrid("gridDnD","updateDnD");a.isFunction(c.p.gridComplete)&&c.p.gridComplete.call(c)},z=function(){c.grid.hDiv.loading=true;if(c.p.hiddengrid)return;switch(c.p.loadui){case"enable":a("#load_"+c.p.id).show();break;case"block":a("#lui_"+c.p.id).show();a("#load_"+c.p.id).show()}},t=function(){c.grid.hDiv.loading=false;switch(c.p.loadui){case"enable":a("#load_"+c.p.id).hide();break;case"block":a("#lui_"+c.p.id).hide();a("#load_"+c.p.id).hide()}},l=function(d){if(!c.grid.hDiv.loading){var m=c.p.scroll&&d===false,e={},j,f,b=c.p.prmNames;if(c.p.page<=0)c.p.page=1;if(b.search!==null)e[b.search]=c.p.search;if(b.nd!==null)e[b.nd]=(new Date).getTime();if(b.rows!==null)e[b.rows]=c.p.rowNum;if(b.page!==null)e[b.page]=c.p.page;if(b.sort!==null)e[b.sort]=c.p.sortname;if(b.order!==null)e[b.order]=c.p.sortorder;if(c.p.rowTotal!==null&&b.totalrows!==null)e[b.totalrows]=c.p.rowTotal;var g=c.p.loadComplete,i=a.isFunction(g);if(!i)g=null;var h=0;d=d||1;if(d>1)if(b.npage!==null){e[b.npage]=d;h=d-1;d=1}else g=function(a){c.p.page++;c.grid.hDiv.loading=false;i&&c.p.loadComplete.call(c,a);l(d-1)};else if(b.npage!==null)delete c.p.postData[b.npage];if(c.p.grouping){a(c).jqGrid("groupingSetup");if(c.p.groupingView.groupDataSorted===true)e[b.sort]=c.p.groupingView.groupField[0]+" "+c.p.groupingView.groupOrder[0]+", "+e[b.sort]}a.extend(c.p.postData,e);var k=!c.p.scroll?1:c.rows.length-1;if(a.isFunction(c.p.datatype)){c.p.datatype.call(c,c.p.postData,"load_"+c.p.id);return}else a.isFunction(c.p.beforeRequest)&&c.p.beforeRequest.call(c);j=c.p.datatype.toLowerCase();switch(j){case"json":case"jsonp":case"xml":case"script":a.ajax(a.extend({url:c.p.url,type:c.p.mtype,dataType:j,data:a.isFunction(c.p.serializeGridData)?c.p.serializeGridData.call(c,c.p.postData):c.p.postData,success:function(a){if(j==="xml")I(a,c.grid.bDiv,k,d>1,h);else x(a,c.grid.bDiv,k,d>1,h);g&&g.call(c,a);m&&c.grid.populateVisible();if(c.p.loadonce||c.p.treeGrid)c.p.datatype="local";a=null;t()},error:function(b,e,d){a.isFunction(c.p.loadError)&&c.p.loadError.call(c,b,e,d);t();b=null},beforeSend:function(b){z();a.isFunction(c.p.loadBeforeSend)&&c.p.loadBeforeSend.call(c,b)}},a.jgrid.ajaxOptions,c.p.ajaxGridOptions));break;case"xmlstring":z();f=a.jgrid.stringToDoc(c.p.datastr);I(f,c.grid.bDiv);i&&c.p.loadComplete.call(c,f);c.p.datatype="local";c.p.datastr=null;t();break;case"jsonstring":z();if(typeof c.p.datastr=="string")f=a.jgrid.parse(c.p.datastr);else f=c.p.datastr;x(f,c.grid.bDiv);i&&c.p.loadComplete.call(c,f);c.p.datatype="local";c.p.datastr=null;t();break;case"local":case"clientside":z();c.p.datatype="local";var n=db();x(n,c.grid.bDiv,k,d>1,h);g&&g.call(c,n);m&&c.grid.populateVisible();t()}}},R=function(e,b){var r="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",g="",d="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",i="",f,p,o,q,j,s,k,n=function(d){var b;if(a.isFunction(c.p.onPaging))b=c.p.onPaging.call(c,d);c.p.selrow=null;if(c.p.multiselect){c.p.selarrrow=[];a("#cb_"+a.jgrid.jqID(c.p.id),c.grid.hDiv).attr("checked",false)}c.p.savedRow=[];return b=="stop"?false:true};e=e.substr(1);f="pg_"+e;p=e+"_left";o=e+"_center";q=e+"_right";a("#"+e).append("<div id='"+f+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+p+"' align='left'></td><td id='"+o+"' align='center' style='white-space:pre;'></td><td id='"+q+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(c.p.rowList.length>0){i="<td dir='"+h+"'>";i+="<select class='ui-pg-selbox' role='listbox'>";for(k=0;k<c.p.rowList.length;k++)i+='<option role="option" value="'+c.p.rowList[k]+'"'+(c.p.rowNum==c.p.rowList[k]?' selected="selected"':"")+">"+c.p.rowList[k]+"</option>";i+="</select></td>"}if(h=="rtl")d+=i;if(c.p.pginput===true)g="<td dir='"+h+"'>"+a.jgrid.format(c.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'></span>")+"</td>";if(c.p.pgbuttons===true){var m=["first"+b,"prev"+b,"next"+b,"last"+b];h=="rtl"&&m.reverse();d+="<td id='"+m[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>";d+="<td id='"+m[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>";d+=g!==""?r+g+r:"";d+="<td id='"+m[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>";d+="<td id='"+m[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else if(g!=="")d+=g;if(h=="ltr")d+=i;d+="</tr></tbody></table>";c.p.viewrecords===true&&a("td#"+e+"_"+c.p.recordpos,"#"+f).append("<div dir='"+h+"' style='text-align:"+c.p.recordpos+"' class='ui-paging-info'></div>");a("td#"+e+"_"+c.p.pagerpos,"#"+f).append(d);s=a(".ui-jqgrid").css("font-size")||"11px";a(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+s+";visibility:hidden;' ></div>");j=a(d).clone().appendTo("#testpg").width();a("#testpg").remove();if(j>0){if(g!="")j+=50;a("td#"+e+"_"+c.p.pagerpos,"#"+f).width(j)}c.p._nvtd=[];c.p._nvtd[0]=j?Math.floor((c.p.width-j)/2):Math.floor(c.p.width/3);c.p._nvtd[1]=0;d=null;a(".ui-pg-selbox","#"+f).bind("change",function(){c.p.page=Math.round(c.p.rowNum*(c.p.page-1)/this.value-.5)+1;c.p.rowNum=this.value;if(b)a(".ui-pg-selbox",c.p.pager).val(this.value);else c.p.toppager&&a(".ui-pg-selbox",c.p.toppager).val(this.value);if(!n("records"))return false;l();return false});if(c.p.pgbuttons===true){a(".ui-pg-button","#"+f).hover(function(){if(a(this).hasClass("ui-state-disabled"))this.style.cursor="default";else{a(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!a(this).hasClass("ui-state-disabled")){a(this).removeClass("ui-state-hover");this.style.cursor="default"}});a("#first"+b+", #prev"+b+", #next"+b+", #last"+b,"#"+e).click(function(){var a=u(c.p.page,1),d=u(c.p.lastpage,1),e=false,h=true,i=true,g=true,f=true;if(d===0||d===1){h=false;i=false;g=false;f=false}else if(d>1&&a>=1){if(a===1){h=false;i=false}else if(!(a>1&&a<d))if(a===d){g=false;f=false}}else if(d>1&&a===0){g=false;f=false;a=d-1}if(this.id==="first"+b&&h){c.p.page=1;e=true}if(this.id==="prev"+b&&i){c.p.page=a-1;e=true}if(this.id==="next"+b&&g){c.p.page=a+1;e=true}if(this.id==="last"+b&&f){c.p.page=d;e=true}if(e){if(!n(this.id))return false;l()}return false})}c.p.pginput===true&&a("input.ui-pg-input","#"+f).keypress(function(b){var d=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(d==13){c.p.page=a(this).val()>0?a(this).val():c.p.page;if(!n("user"))return false;l();return false}return this})},S=function(e,b,g,f){if(!c.p.colModel[b].sortable)return;var h;if(c.p.savedRow.length>0)return;if(!g){if(c.p.lastsort==b){if(c.p.sortorder=="asc")c.p.sortorder="desc";else if(c.p.sortorder=="desc")c.p.sortorder="asc"}else c.p.sortorder=c.p.colModel[b].firstsortorder||"asc";c.p.page=1}if(f)if(c.p.lastsort==b&&c.p.sortorder==f&&!g)return;else c.p.sortorder=f;var d=a("thead:first",c.grid.hDiv).get(0);a("tr th:eq("+c.p.lastsort+") span.ui-grid-ico-sort",d).addClass("ui-state-disabled");a("tr th:eq("+c.p.lastsort+")",d).attr("aria-selected","false");a("tr th:eq("+b+") span.ui-icon-"+c.p.sortorder,d).removeClass("ui-state-disabled");a("tr th:eq("+b+")",d).attr("aria-selected","true");if(!c.p.viewsortcols[0])if(c.p.lastsort!=b){a("tr th:eq("+c.p.lastsort+") span.s-ico",d).hide();a("tr th:eq("+b+") span.s-ico",d).show()}e=e.substring(5);c.p.sortname=c.p.colModel[b].index||e;h=c.p.sortorder;if(a.isFunction(c.p.onSortCol))if(c.p.onSortCol.call(c,e,b,h)=="stop"){c.p.lastsort=b;return}if(c.p.datatype=="local")c.p.deselectAfterSort&&a(c).jqGrid("resetSelection");else{c.p.selrow=null;c.p.multiselect&&a("#cb_"+a.jgrid.jqID(c.p.id),c.grid.hDiv).attr("checked",false);c.p.selarrrow=[];c.p.savedRow=[]}if(c.p.scroll){var i=c.grid.bDiv.scrollLeft;r(c.grid.bDiv,true);c.grid.hDiv.scrollLeft=i}c.p.subGrid&&c.p.datatype=="local"&&a("td.sgexpanded","#"+c.p.id).each(function(){a(this).trigger("click")});l();c.p.lastsort=b;if(c.p.sortname!=e&&b)c.p.lastsort=b},fb=function(){var b=0,e=c.p.cellLayout,f=0,i,j=c.p.scrollOffset,l,m=false,k,n=0,g=0,o=0,h;if(J)e=0;a.each(c.p.colModel,function(){if(typeof this.hidden==="undefined")this.hidden=false;if(this.hidden===false){b+=u(this.width,0);if(this.fixed){n+=this.width;g+=this.width+e}else f++;o++}});if(isNaN(c.p.width))c.p.width=d.width=b;else d.width=c.p.width;c.p.tblwidth=b;if(c.p.shrinkToFit===false&&c.p.forceFit===true)c.p.forceFit=false;if(c.p.shrinkToFit===true&&f>0){k=d.width-e*f-g;if(!isNaN(c.p.height)){k-=j;m=true}b=0;a.each(c.p.colModel,function(a){if(this.hidden===false&&!this.fixed){l=Math.round(k*this.width/(c.p.tblwidth-n));this.width=l;b+=l;i=a}});h=0;if(m){if(d.width-g-(b+e*f)!==j)h=d.width-g-(b+e*f)-j}else if(!m&&Math.abs(d.width-g-(b+e*f))!==1)h=d.width-g-(b+e*f);c.p.colModel[i].width+=h;c.p.tblwidth=b+h+n+o*e;if(c.p.tblwidth>c.p.width){c.p.colModel[i].width-=c.p.tblwidth-parseInt(c.p.width,10);c.p.tblwidth=c.p.width}}},eb=function(b){for(var e=b,d=b,a=b+1;a<c.p.colModel.length;a++)if(c.p.colModel[a].hidden!==true){d=a;break}return d-e},hb=function(f){var d,b={},e=J?0:c.p.cellLayout;b[0]=b[1]=b[2]=0;for(d=0;d<=f;d++)if(c.p.colModel[d].hidden===false)b[0]+=c.p.colModel[d].width+e;if(c.p.direction=="rtl")b[0]=c.p.width-b[0];b[0]=b[0]-c.grid.bDiv.scrollLeft;if(a(c.grid.cDiv).is(":visible"))b[1]+=a(c.grid.cDiv).height()+parseInt(a(c.grid.cDiv).css("padding-top"),10)+parseInt(a(c.grid.cDiv).css("padding-bottom"),10);if(c.p.toolbar[0]===true&&(c.p.toolbar[1]=="top"||c.p.toolbar[1]=="both"))b[1]+=a(c.grid.uDiv).height()+parseInt(a(c.grid.uDiv).css("border-top-width"),10)+parseInt(a(c.grid.uDiv).css("border-bottom-width"),10);if(c.p.toppager)b[1]+=a(c.grid.topDiv).height()+parseInt(a(c.grid.topDiv).css("border-bottom-width"),10);b[2]+=a(c.grid.bDiv).height()+a(c.grid.hDiv).height();return b};this.p.id=this.id;if(a.inArray(c.p.multikey,ib)==-1)c.p.multikey=false;c.p.keyIndex=false;for(f=0;f<c.p.colModel.length;f++){G=c.p.colModel[f];G=a.extend(G,c.p.cmTemplate,G.template||{});if(c.p.keyIndex===false&&c.p.colModel[f].key===true)c.p.keyIndex=f}c.p.sortorder=c.p.sortorder.toLowerCase();if(c.p.grouping===true){c.p.scroll=false;c.p.rownumbers=false;c.p.subGrid=false;c.p.treeGrid=false;c.p.gridview=true}if(this.p.treeGrid===true){try{a(this).jqGrid("setTreeGrid")}catch(mb){}if(c.p.datatype!="local")c.p.localReader={id:"_id_"}}if(this.p.subGrid)try{a(c).jqGrid("setSubGrid")}catch(mb){}if(this.p.multiselect){this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:"cb",width:J?c.p.multiselectWidth+c.p.cellLayout:c.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:c.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}c.p.xmlReader=a.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},c.p.xmlReader);c.p.jsonReader=a.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},c.p.jsonReader);c.p.localReader=a.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},c.p.localReader);if(c.p.scroll){c.p.pgbuttons=false;c.p.pginput=false;c.p.rowList=[]}c.p.data.length&&q();var k="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",ab,Z,H,v,E,i,g,W,D,X="",Y="";if(c.p.shrinkToFit===true&&c.p.forceFit===true)for(f=c.p.colModel.length-1;f>=0;f--)if(!c.p.colModel[f].hidden){c.p.colModel[f].resizable=false;break}if(c.p.viewsortcols[1]=="horizontal"){X=" ui-i-asc";Y=" ui-i-desc"}ab=B?"class='ui-th-div-ie'":"";D="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+X+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+h+"'></span>";D+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+Y+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+h+"'></span></span>";for(f=0;f<this.p.colNames.length;f++){var jb=c.p.headertitles?' title="'+a.jgrid.stripHtml(c.p.colNames[f])+'"':"";k+="<th id='"+c.p.id+"_"+c.p.colModel[f].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+h+"'"+jb+">";Z=c.p.colModel[f].index||c.p.colModel[f].name;k+="<div id='jqgh_"+c.p.colModel[f].name+"' "+ab+">"+c.p.colNames[f];if(!c.p.colModel[f].width)c.p.colModel[f].width=150;else c.p.colModel[f].width=parseInt(c.p.colModel[f].width,10);if(typeof c.p.colModel[f].title!=="boolean")c.p.colModel[f].title=true;if(Z==c.p.sortname)c.p.lastsort=f;k+=D+"</div></th>"}k+="</tr></thead>";D=null;a(this).append(k);a("thead tr:first th",this).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});if(this.p.multiselect){var M=[],F;a("#cb_"+a.jgrid.jqID(c.p.id),this).bind("click",function(){if(this.checked){a("[id^=jqg_"+c.p.id+"_]").attr("checked","checked");a(c.rows).each(function(b){if(b>0)if(!a(this).hasClass("subgrid")&&!a(this).hasClass("jqgroup")){a(this).addClass("ui-state-highlight").attr("aria-selected","true");c.p.selarrrow.push(this.id);c.p.selrow=this.id}});F=true;M=[]}else{a("[id^=jqg_"+c.p.id+"_]").removeAttr("checked");a(c.rows).each(function(b){if(b>0)if(!a(this).hasClass("subgrid")){a(this).removeClass("ui-state-highlight").attr("aria-selected","false");M.push(this.id)}});c.p.selarrrow=[];c.p.selrow=null;F=false}a.isFunction(c.p.onSelectAll)&&c.p.onSelectAll.call(c,F?c.p.selarrrow:M,F)})}if(c.p.autowidth===true){var cb=a(w).innerWidth();c.p.width=cb>0?cb:"nw"}fb();a(w).css("width",d.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+c.p.id+"'>&#160;</div>");a(o).css("width",d.width+"px");k=a("thead:first",c).get(0);var C="";if(c.p.footerrow)C+="<table role='grid' style='width:"+c.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+h+"'>";var bb=a("tr:first",k),A="<tr class='jqgfirstrow' role='row' style='height:auto'>";c.p.disableClick=false;a("th",bb).each(function(b){H=c.p.colModel[b].width;if(typeof c.p.colModel[b].resizable==="undefined")c.p.colModel[b].resizable=true;if(c.p.colModel[b].resizable){v=document.createElement("span");a(v).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+h);!a.browser.opera&&a(v).css("cursor","col-resize");a(this).addClass(c.p.resizeclass)}else v="";a(this).css("width",H+"px").prepend(v);var f="";if(c.p.colModel[b].hidden){a(this).css("display","none");f="display:none;"}A+="<td role='gridcell' style='height:0px;width:"+H+"px;"+f+"'></td>";d.headers[b]={width:H,el:this};E=c.p.colModel[b].sortable;if(typeof E!=="boolean"){c.p.colModel[b].sortable=true;E=true}var e=c.p.colModel[b].name;if(!(e=="cb"||e=="subgrid"||e=="rn"))c.p.viewsortcols[2]&&a("div",this).addClass("ui-jqgrid-sortable");if(E)if(c.p.viewsortcols[0]){a("div span.s-ico",this).show();b==c.p.lastsort&&a("div span.ui-icon-"+c.p.sortorder,this).removeClass("ui-state-disabled")}else if(b==c.p.lastsort){a("div span.s-ico",this).show();a("div span.ui-icon-"+c.p.sortorder,this).removeClass("ui-state-disabled")}if(c.p.footerrow)C+="<td role='gridcell' "+s(b,0,"")+">&#160;</td>"}).mousedown(function(e){if(a(e.target).closest("th>span.ui-jqgrid-resize").length!=1)return;var b=a.jgrid.getCellIndex(this);if(c.p.forceFit===true)c.p.nv=eb(b);d.dragStart(b,e,hb(b));return false}).click(function(h){if(c.p.disableClick){c.p.disableClick=false;return false}var e="th>div.ui-jqgrid-sortable",d,b;if(!c.p.viewsortcols[2])e="th>div>span>span.ui-grid-ico-sort";var f=a(h.target).closest(e);if(f.length!=1)return;var g=a.jgrid.getCellIndex(this);if(!c.p.viewsortcols[2]){d=true;b=f.attr("sort")}S(a("div",this)[0].id,g,d,b);return false});if(c.p.sortable&&a.fn.sortable)try{a(c).jqGrid("sortableColumns",bb)}catch(lb){}if(c.p.footerrow)C+="</tr></tbody></table>";A+="</tr>";W=document.createElement("tbody");this.appendChild(W);a(this).addClass("ui-jqgrid-btable").append(A);A=null;var U=a("<table class='ui-jqgrid-htable' style='width:"+c.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(k),j=c.p.caption&&c.p.hiddengrid===true?true:false,p=a("<div class='ui-jqgrid-hbox"+(h=="rtl"?"-rtl":"")+"'></div>");k=null;d.hDiv=document.createElement("div");a(d.hDiv).css({width:d.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(p);a(p).append(U);U=null;j&&a(d.hDiv).hide();if(c.p.pager){if(typeof c.p.pager=="string"){if(c.p.pager.substr(0,1)!="#")c.p.pager="#"+c.p.pager}else c.p.pager="#"+a(c.p.pager).attr("id");a(c.p.pager).css({width:d.width+"px"}).appendTo(w).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");j&&a(c.p.pager).hide();R(c.p.pager,"")}c.p.cellEdit===false&&c.p.hoverrows===true&&a(c).bind("mouseover",function(b){g=a(b.target).closest("tr.jqgrow");a(g).attr("class")!=="subgrid"&&a(g).addClass("ui-state-hover");return false}).bind("mouseout",function(b){g=a(b.target).closest("tr.jqgrow");a(g).removeClass("ui-state-hover");return false});var n,m;a(c).before(d.hDiv).click(function(d){i=d.target;var b=a(i).hasClass("cbox");g=a(i,c.rows).closest("tr.jqgrow");if(a(g).length===0)return this;var e=true;if(a.isFunction(c.p.beforeSelectRow))e=c.p.beforeSelectRow.call(c,g[0].id,d);if(i.tagName=="A"||(i.tagName=="INPUT"||i.tagName=="TEXTAREA"||i.tagName=="OPTION"||i.tagName=="SELECT")&&!b)return this;if(e===true){if(c.p.cellEdit===true)if(c.p.multiselect&&b)a(c).jqGrid("setSelection",g[0].id,true);else{n=g[0].rowIndex;m=a.jgrid.getCellIndex(i);try{a(c).jqGrid("editCell",n,m,true)}catch(f){}}else if(!c.p.multikey)if(c.p.multiselect&&c.p.multiboxonly)if(b)a(c).jqGrid("setSelection",g[0].id,true);else{a(c.p.selarrrow).each(function(e,b){var d=c.rows.namedItem(b);a(d).removeClass("ui-state-highlight");a("#jqg_"+c.p.id+"_"+a.jgrid.jqID(b)).attr("checked",false)});c.p.selarrrow=[];a("#cb_"+a.jgrid.jqID(c.p.id),c.grid.hDiv).attr("checked",false);a(c).jqGrid("setSelection",g[0].id,true)}else a(c).jqGrid("setSelection",g[0].id,true);else if(d[c.p.multikey])a(c).jqGrid("setSelection",g[0].id,true);else if(c.p.multiselect&&b){b=a("[id^=jqg_"+c.p.id+"_]").attr("checked");a("[id^=jqg_"+c.p.id+"_]").attr("checked",!b)}if(a.isFunction(c.p.onCellSelect)){n=g[0].id;m=a.jgrid.getCellIndex(i);c.p.onCellSelect.call(c,n,m,a(i).html(),d)}d.stopPropagation()}else return this}).bind("reloadGrid",function(e,d){if(c.p.treeGrid===true)c.p.datatype=c.p.treedatatype;d&&d.current&&c.grid.selectionPreserver(c);if(c.p.datatype=="local"){a(c).jqGrid("resetSelection");c.p.data.length&&q()}else if(!c.p.treeGrid){c.p.selrow=null;if(c.p.multiselect){c.p.selarrrow=[];a("#cb_"+a.jgrid.jqID(c.p.id),c.grid.hDiv).attr("checked",false)}c.p.savedRow=[]}c.p.scroll&&r(c.grid.bDiv,true);if(d&&d.page){var b=d.page;if(b>c.p.lastpage)b=c.p.lastpage;if(b<1)b=1;c.p.page=b;if(c.grid.prevRowHeight)c.grid.bDiv.scrollTop=(b-1)*c.grid.prevRowHeight*c.p.rowNum;else c.grid.bDiv.scrollTop=0}if(c.grid.prevRowHeight&&c.p.scroll){delete c.p.lastpage;c.grid.populateVisible()}else c.grid.populate();return false});a.isFunction(this.p.ondblClickRow)&&a(this).dblclick(function(b){i=b.target;g=a(i,c.rows).closest("tr.jqgrow");if(a(g).length===0)return false;n=g[0].rowIndex;m=a.jgrid.getCellIndex(i);c.p.ondblClickRow.call(c,a(g).attr("id"),n,m,b);return false});a.isFunction(this.p.onRightClickRow)&&a(this).bind("contextmenu",function(b){i=b.target;g=a(i,c.rows).closest("tr.jqgrow");if(a(g).length===0)return false;!c.p.multiselect&&a(c).jqGrid("setSelection",g[0].id,true);n=g[0].rowIndex;m=a.jgrid.getCellIndex(i);c.p.onRightClickRow.call(c,a(g).attr("id"),n,m,b);return false});d.bDiv=document.createElement("div");a(d.bDiv).append(a('<div style="position:relative;'+(B&&a.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:c.p.height+(isNaN(c.p.height)?"":"px"),width:d.width+"px"}).scroll(d.scrollGrid);a("table:first",d.bDiv).css({width:c.p.tblwidth+"px"});if(B){a("tbody",this).size()==2&&a("tbody:gt(0)",this).remove();c.p.multikey&&a(d.bDiv).bind("selectstart",function(){return false})}else c.p.multikey&&a(d.bDiv).bind("mousedown",function(){return false});j&&a(d.bDiv).hide();d.cDiv=document.createElement("div");var L=c.p.hidegrid===true?a("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){L.addClass("ui-state-hover")},function(){L.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css(h=="rtl"?"left":"right","0px"):"";a(d.cDiv).append(L).append("<span class='ui-jqgrid-title"+(h=="rtl"?"-rtl":"")+"'>"+c.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");a(d.cDiv).insertBefore(d.hDiv);if(c.p.toolbar[0]){d.uDiv=document.createElement("div");if(c.p.toolbar[1]=="top")a(d.uDiv).insertBefore(d.hDiv);else c.p.toolbar[1]=="bottom"&&a(d.uDiv).insertAfter(d.hDiv);if(c.p.toolbar[1]=="both"){d.ubDiv=document.createElement("div");a(d.uDiv).insertBefore(d.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);a(d.ubDiv).insertAfter(d.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id);j&&a(d.ubDiv).hide()}else a(d.uDiv).width(d.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);j&&a(d.uDiv).hide()}if(c.p.toppager){c.p.toppager=c.p.id+"_toppager";d.topDiv=a("<div id='"+c.p.toppager+"'></div>")[0];c.p.toppager="#"+c.p.toppager;a(d.topDiv).insertBefore(d.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(d.width);R(c.p.toppager,"_t")}if(c.p.footerrow){d.sDiv=a("<div class='ui-jqgrid-sdiv'></div>")[0];p=a("<div class='ui-jqgrid-hbox"+(h=="rtl"?"-rtl":"")+"'></div>");a(d.sDiv).append(p).insertAfter(d.hDiv).width(d.width);a(p).append(C);d.footers=a(".ui-jqgrid-ftable",d.sDiv)[0].rows[0].cells;if(c.p.rownumbers)d.footers[0].className="ui-state-default jqgrid-rownum";j&&a(d.sDiv).hide()}p=null;if(c.p.caption){var kb=c.p.datatype;if(c.p.hidegrid===true){a(".ui-jqgrid-titlebar-close",d.cDiv).click(function(h){var f=a.isFunction(c.p.onHeaderClick),e=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",b,g=this;if(c.p.toolbar[0]===true){if(c.p.toolbar[1]=="both")e+=", #"+a(d.ubDiv).attr("id");e+=", #"+a(d.uDiv).attr("id")}b=a(e,"#gview_"+c.p.id).length;if(c.p.gridstate=="visible")a(e,"#gbox_"+c.p.id).slideUp("fast",function(){b--;if(b==0){a("span",g).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");c.p.gridstate="hidden";a("#gbox_"+c.p.id).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+c.p.id).hide();if(f)!j&&c.p.onHeaderClick.call(c,c.p.gridstate,h)}});else c.p.gridstate=="hidden"&&a(e,"#gbox_"+c.p.id).slideDown("fast",function(){b--;if(b==0){a("span",g).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(j){c.p.datatype=kb;l();j=false}c.p.gridstate="visible";a("#gbox_"+c.p.id).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+c.p.id).show();if(f)!j&&c.p.onHeaderClick.call(c,c.p.gridstate,h)}});return false});if(j){c.p.datatype="local";a(".ui-jqgrid-titlebar-close",d.cDiv).trigger("click")}}}else a(d.cDiv).hide();a(d.hDiv).after(d.bDiv).mousemove(function(a){if(d.resizing){d.dragMove(a);return false}});a(".ui-jqgrid-labels",d.hDiv).bind("selectstart",function(){return false});a(document).mouseup(function(){if(d.resizing){d.dragEnd();return false}return true});c.formatCol=s;c.sortData=S;c.updatepager=gb;c.refreshIndex=q;c.formatter=function(c,a,b,d,e){return P(c,a,b,d,e)};a.extend(d,{populate:l,emptyRows:r});this.grid=d;c.addXmlData=function(a){I(a,c.grid.bDiv)};c.addJSONData=function(a){x(a,c.grid.bDiv)};this.grid.cols=this.rows[0].cells;l();c.p.hiddengrid=false;a(window).unload(function(){c=null})})};a.jgrid.extend({getGridParam:function(b){var a=this[0];return!a||!a.grid?void 0:!b?a.p:typeof a.p[b]!="undefined"?a.p[b]:null},setGridParam:function(b){function d(b){var h=b.slice(5)+"-"+b.slice(0,4),f=b.replace(/\-/g,"/"),d=new Date(f),c=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1),g=e(c.getMonth()),a=c.getDate();a=a<10?"0"+a:a;var f=c.getFullYear()+"-"+g+"-"+a;return f}function e(b){var a="";switch(b){case 0:a="01";break;case 1:a="02";break;case 2:a="03";break;case 3:a="04";break;case 4:a="05";break;case 5:a="06";break;case 6:a="07";break;case 7:a="08";break;case 8:a="09";break;case 9:a="10";break;case 10:a="11";break;case 11:a="12"}return a}for(var c in b.postData)if(/endTime|\$LE\$D$/.test(c))if(b.postData[c]!="")b.postData[c]=d(b.postData[c]);return this.each(function(){this.grid&&typeof b==="object"&&a.extend(true,this.p,b)})},getDataIDs:function(){var d=[],c=0,b,e=0;this.each(function(){b=this.rows.length;if(b&&b>0)while(c<b){if(a(this.rows[c]).hasClass("jqgrow")){d[e]=this.rows[c].id;e++}c++}});return d},setSelection:function(c,b){return this.each(function(){var d=this,f,e,h,i,g;if(c===undefined)return;b=b===false?false:true;e=d.rows.namedItem(c+"");if(!e)return;function j(f){var e=a(d.grid.bDiv)[0].clientHeight,c=a(d.grid.bDiv)[0].scrollTop,b=d.rows[f].offsetTop,g=d.rows[f].clientHeight;if(b+g>=e+c)a(d.grid.bDiv)[0].scrollTop=b-(e+c)+g+c;else if(b<e+c)if(b<c)a(d.grid.bDiv)[0].scrollTop=b}if(d.p.scrollrows===true){h=d.rows.namedItem(c).rowIndex;h>=0&&j(h)}if(!d.p.multiselect){if(e.className!=="ui-subgrid"){d.p.selrow&&a(d.rows.namedItem(d.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");if(d.p.selrow!=e.id){d.p.selrow=e.id;a(e).addClass("ui-state-highlight").attr("aria-selected","true");d.p.onSelectRow&&b&&d.p.onSelectRow.call(d,d.p.selrow,true)}else d.p.selrow=null}}else{d.p.selrow=e.id;i=a.inArray(d.p.selrow,d.p.selarrrow);if(i===-1){e.className!=="ui-subgrid"&&a(e).addClass("ui-state-highlight").attr("aria-selected","true");f=true;a("#jqg_"+d.p.id+"_"+a.jgrid.jqID(d.p.selrow)).attr("checked",f);d.p.selarrrow.push(d.p.selrow);d.p.onSelectRow&&b&&d.p.onSelectRow.call(d,d.p.selrow,f)}else{e.className!=="ui-subgrid"&&a(e).removeClass("ui-state-highlight").attr("aria-selected","false");f=false;a("#jqg_"+d.p.id+"_"+a.jgrid.jqID(d.p.selrow)).attr("checked",f);d.p.selarrrow.splice(i,1);d.p.onSelectRow&&b&&d.p.onSelectRow.call(d,d.p.selrow,f);g=d.p.selarrrow[0];d.p.selrow=g===undefined?null:g}}})},resetSelection:function(){return this.each(function(){var b=this,c;if(!b.p.multiselect){if(b.p.selrow){a("#"+b.p.id+" tbody:first tr#"+a.jgrid.jqID(b.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");b.p.selrow=null}}else{a(b.p.selarrrow).each(function(e,d){c=b.rows.namedItem(d);a(c).removeClass("ui-state-highlight").attr("aria-selected","false");a("#jqg_"+b.p.id+"_"+a.jgrid.jqID(d)).attr("checked",false)});a("#cb_"+a.jgrid.jqID(b.p.id)).attr("checked",false);b.p.selarrrow=[]}b.p.savedRow=[]})},getRowData:function(g){var b={},c,d=false,e,f=0;this.each(function(){var i=this,h,j;if(typeof g=="undefined"){d=true;c=[];e=i.rows.length}else{j=i.rows.namedItem(g);if(!j)return b;e=2}while(f<e){if(d)j=i.rows[f];if(a(j).hasClass("jqgrow")){a("td",j).each(function(c){h=i.p.colModel[c].name;if(h!=="cb"&&h!=="subgrid"&&h!=="rn")if(i.p.treeGrid===true&&h==i.p.ExpandColumn)b[h]=a.jgrid.htmlDecode(a("span:first",this).html());else try{b[h]=a.unformat(this,{rowId:j.id,colModel:i.p.colModel[c]},c)}catch(d){b[h]=a.jgrid.htmlDecode(a(this).html())}});if(d){c.push(b);b={}}}f++}});return c?c:b},delRowData:function(c){var d=false,b,e,f;this.each(function(){var g=this;b=g.rows.namedItem(c);if(!b)return false;else{f=b.rowIndex;a(b).remove();g.p.records--;g.p.reccount--;g.updatepager(true,false);d=true;if(g.p.multiselect){e=a.inArray(c,g.p.selarrrow);e!=-1&&g.p.selarrrow.splice(e,1)}if(c==g.p.selrow)g.p.selrow=null}if(g.p.datatype=="local"){var h=g.p._index[c];if(typeof h!="undefined"){g.p.data.splice(h,1);g.refreshIndex()}}if(g.p.altRows===true&&d){var i=g.p.altclass;a(g.rows).each(function(b){if(b%2==1)a(this).addClass(i);else a(this).removeClass(i)})}});return d},setRowData:function(e,c,g){var b,d=true,f;this.each(function(){if(!this.grid)return false;var h=this,j,i,m=typeof g,k={};i=h.rows.namedItem(e);if(!i)return false;if(c)try{a(this.p.colModel).each(function(d){b=this.name;if(c[b]!==undefined){k[b]=this.formatter&&typeof this.formatter==="string"&&this.formatter=="date"?a.unformat.date(c[b],this):c[b];j=h.formatter(e,c[b],d,c,"edit");f=this.title?{title:a.jgrid.stripHtml(j)}:{};if(h.p.treeGrid===true&&b==h.p.ExpandColumn)a("td:eq("+d+") > span:first",i).html(j).attr(f);else a("td:eq("+d+")",i).html(j).attr(f)}});if(h.p.datatype=="local"){var l=h.p._index[e];if(typeof l!="undefined")h.p.data[l]=a.extend(true,h.p.data[l],k);k=null}}catch(n){d=false}if(d)if(m==="string")a(i).addClass(g);else m==="object"&&a(i).css(g)});return d},addRowData:function(c,e,o,t){if(!o)o="last";var s=false,k,b,j,r,g,d,l,q,h="",m,n,p,f,i;if(e){if(a.isArray(e)){m=true;o="last";n=c}else{e=[e];m=false}this.each(function(){var u=this,y=e.length;g=u.p.rownumbers===true?1:0;j=u.p.multiselect===true?1:0;r=u.p.subGrid===true?1:0;if(!m)if(typeof c!="undefined")c=c+"";else{c=u.p.records+1+"";if(u.p.keyIndex!==false){n=u.p.colModel[u.p.keyIndex+j+r+g].name;if(typeof e[0][n]!="undefined")c=e[0][n]}}p=u.p.altclass;var w=0,x="",v={},z=a.isFunction(u.p.afterInsertRow)?true:false;while(w<y){f=e[w];b="";if(m){try{c=f[n]}catch(A){c=u.p.records+1+""}x=u.p.altRows===true?(u.rows.length-1)%2===0?p:"":""}if(g){h=u.formatCol(0,1,"");b+='<td role="gridcell" aria-describedby="'+u.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+h+">0</td>"}if(j){q='<input role="checkbox" type="checkbox" id="jqg_'+u.p.id+"_"+c+'" class="cbox"/>';h=u.formatCol(g,1,"");b+='<td role="gridcell" aria-describedby="'+u.p.id+'_cb" '+h+">"+q+"</td>"}if(r)b+=a(u).jqGrid("addSubGridCell",j+g,1);for(l=j+r+g;l<u.p.colModel.length;l++){i=u.p.colModel[l];k=i.name;v[k]=i.formatter&&typeof i.formatter==="string"&&i.formatter=="date"?a.unformat.date(f[k],i):f[k];q=u.formatter(c,a.jgrid.getAccessor(f,k),l,f,"edit");h=u.formatCol(l,1,q);b+='<td role="gridcell" aria-describedby="'+u.p.id+"_"+k+'" '+h+">"+q+"</td>"}b='<tr id="'+c+'" role="row" class="ui-widget-content jqgrow ui-row-'+u.p.direction+" "+x+'">'+b+"</tr>";if(u.p.subGrid===true){b=a(b)[0];a(u).jqGrid("addSubGrid",b,j+g)}if(u.rows.length===0)a("table:first",u.grid.bDiv).append(b);else switch(o){case"last":a(u.rows[u.rows.length-1]).after(b);break;case"first":a(u.rows[0]).after(b);break;case"after":d=u.rows.namedItem(t);if(d)if(a(u.rows[d.rowIndex+1]).hasClass("ui-subgrid"))a(u.rows[d.rowIndex+1]).after(b);else a(d).after(b);break;case"before":d=u.rows.namedItem(t);if(d){a(d).before(b);d=d.rowIndex}}u.p.records++;u.p.reccount++;z&&u.p.afterInsertRow.call(u,c,f,f);w++;if(u.p.datatype=="local"){u.p._index[c]=u.p.data.length;u.p.data.push(v);v={}}}if(u.p.altRows===true&&!m)if(o=="last")(u.rows.length-1)%2==1&&a(u.rows[u.rows.length-1]).addClass(p);else a(u.rows).each(function(b){if(b%2==1)a(this).addClass(p);else a(this).removeClass(p)});u.updatepager(true,true);s=true})}return s},footerData:function(b,c,f){var d,e=false,h={},g;function i(a){for(var b in a)if(a.hasOwnProperty(b))return false;return true}if(typeof b=="undefined")b="get";if(typeof f!="boolean")f=true;b=b.toLowerCase();this.each(function(){var j=this,k;if(!j.grid||!j.p.footerrow)return false;if(b=="set")if(i(c))return false;e=true;a(this.p.colModel).each(function(i){d=this.name;if(b=="set"){if(c[d]!==undefined){k=f?j.formatter("",c[d],i,c,"edit"):c[d];g=this.title?{title:a.jgrid.stripHtml(k)}:{};a("tr.footrow td:eq("+i+")",j.grid.sDiv).html(k).attr(g);e=true}}else if(b=="get")h[d]=a("tr.footrow td:eq("+i+")",j.grid.sDiv).html()})});return b=="get"?h:e},ShowHideCol:function(c,b){return this.each(function(){var d=this,e=false;if(!d.grid)return;if(typeof c==="string")c=[c];b=b!="none"?"":"none";var f=b===""?true:false;a(this.p.colModel).each(function(g){if(a.inArray(this.name,c)!==-1&&this.hidden===f){a("tr",d.grid.hDiv).each(function(){a("th:eq("+g+")",this).css("display",b)});a(d.rows).each(function(c){a("td:eq("+g+")",d.rows[c]).css("display",b)});d.p.footerrow&&a("td:eq("+g+")",d.grid.sDiv).css("display",b);if(b=="none")d.p.tblwidth-=this.width+d.p.cellLayout;else d.p.tblwidth+=this.width;this.hidden=!f;e=true}});if(e===true){a("table:first",d.grid.hDiv).width(d.p.tblwidth);a("table:first",d.grid.bDiv).width(d.p.tblwidth);d.grid.hDiv.scrollLeft=d.grid.bDiv.scrollLeft;if(d.p.footerrow){a("table:first",d.grid.sDiv).width(d.p.tblwidth);d.grid.sDiv.scrollLeft=d.grid.bDiv.scrollLeft}d.p.shrinkToFit===true&&a(d).jqGrid("setGridWidth",d.grid.width-.001,true)}})},hideCol:function(b){return this.each(function(){a(this).jqGrid("ShowHideCol",b,"none")})},showCol:function(b){return this.each(function(){a(this).jqGrid("ShowHideCol",b,"")})},remapColumns:function(c,f,g){function d(b){var d;if(b.length)d=a.makeArray(b);else d=a.extend({},b);a.each(c,function(a){b[a]=d[this]})}var b=this.get(0);function e(b,d){a(">tr"+(d||""),b).each(function(){var b=this,d=a.makeArray(b.cells);a.each(c,function(){var a=d[this];a&&b.appendChild(a)})})}d(b.p.colModel);d(b.p.colNames);d(b.grid.headers);e(a("thead:first",b.grid.hDiv),g&&":not(.ui-jqgrid-labels)");f&&e(a("#"+b.p.id+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");b.p.footerrow&&e(a("tbody:first",b.grid.sDiv));if(b.p.remapColumns)if(!b.p.remapColumns.length)b.p.remapColumns=a.makeArray(c);else d(b.p.remapColumns);b.p.lastsort=a.inArray(b.p.lastsort,c);if(b.p.treeGrid)b.p.expColInd=a.inArray(b.p.expColInd,c)},setGridWidth:function(b,c){return this.each(function(){if(!this.grid)return;var d=this,e,f=0,h=d.p.cellLayout,g,i=0,q=false,l=d.p.scrollOffset,m,j=0,n=0,p=0,k;if(typeof c!="boolean")c=d.p.shrinkToFit;if(isNaN(b))return;else{b=parseInt(b,10);d.grid.width=d.p.width=b}a("#gbox_"+d.p.id).css("width",b+"px");a("#gview_"+d.p.id).css("width",b+"px");a(d.grid.bDiv).css("width",b+"px");a(d.grid.hDiv).css("width",b+"px");d.p.pager&&a(d.p.pager).css("width",b+"px");d.p.toppager&&a(d.p.toppager).css("width",b+"px");if(d.p.toolbar[0]===true){a(d.grid.uDiv).css("width",b+"px");d.p.toolbar[1]=="both"&&a(d.grid.ubDiv).css("width",b+"px")}d.p.footerrow&&a(d.grid.sDiv).css("width",b+"px");if(c===false&&d.p.forceFit===true)d.p.forceFit=false;if(c===true){if(a.browser.safari)h=0;a.each(d.p.colModel,function(){if(this.hidden===false){f+=parseInt(this.width,10);if(this.fixed){n+=this.width;j+=this.width+h}else i++;p++}});if(i===0)return;d.p.tblwidth=f;m=b-h*i-j;if(!isNaN(d.p.height))if(a(d.grid.bDiv)[0].clientHeight<a(d.grid.bDiv)[0].scrollHeight||d.rows.length===1){q=true;m-=l}f=0;var o=d.grid.cols.length>0;a.each(d.p.colModel,function(a){if(this.hidden===false&&!this.fixed){e=Math.round(m*this.width/(d.p.tblwidth-n));if(e<0)return;this.width=e;f+=e;d.grid.headers[a].width=e;d.grid.headers[a].el.style.width=e+"px";if(d.p.footerrow)d.grid.footers[a].style.width=e+"px";if(o)d.grid.cols[a].style.width=e+"px";g=a}});k=0;if(q){if(b-j-(f+h*i)!==l)k=b-j-(f+h*i)-l}else if(Math.abs(b-j-(f+h*i))!==1)k=b-j-(f+h*i);d.p.colModel[g].width+=k;d.p.tblwidth=f+k+n+h*p;if(d.p.tblwidth>b){var r=d.p.tblwidth-parseInt(b,10);d.p.tblwidth=b;e=d.p.colModel[g].width=d.p.colModel[g].width-r}else e=d.p.colModel[g].width;d.grid.headers[g].width=e;d.grid.headers[g].el.style.width=e+"px";if(o)d.grid.cols[g].style.width=e+"px";a("table:first",d.grid.bDiv).css("width",d.p.tblwidth+"px");a("table:first",d.grid.hDiv).css("width",d.p.tblwidth+"px");d.grid.hDiv.scrollLeft=d.grid.bDiv.scrollLeft;if(d.p.footerrow){d.grid.footers[g].style.width=e+"px";a("table:first",d.grid.sDiv).css("width",d.p.tblwidth+"px")}}})},setGridHeight:function(b){return this.each(function(){var c=this;if(!c.grid)return;a(c.grid.bDiv).css({height:b+(isNaN(b)?"":"px")});c.p.height=b;c.p.scroll&&c.grid.populateVisible()})},setCaption:function(b){return this.each(function(){this.p.caption=b;a("span.ui-jqgrid-title",this.grid.cDiv).html(b);a(this.grid.cDiv).show()})},setLabel:function(c,d,b,e){return this.each(function(){var h=this,g=-1;if(!h.grid)return;if(isNaN(c))a(h.p.colModel).each(function(a){if(this.name==c){g=a;return false}});else g=parseInt(c,10);if(g>=0){var f=a("tr.ui-jqgrid-labels th:eq("+g+")",h.grid.hDiv);if(d){var i=a(".s-ico",f);a("[id^=jqgh_]",f).empty().html(d).append(i);h.p.colNames[g]=d}if(b)if(typeof b==="string")a(f).addClass(b);else a(f).css(b);typeof e==="object"&&a(f).attr(e)}})},setCell:function(e,d,b,c,f,g){return this.each(function(){var h=this,i=-1,l,n;if(!h.grid)return;if(isNaN(d))a(h.p.colModel).each(function(a){if(this.name==d){i=a;return false}});else i=parseInt(d,10);if(i>=0){var o=h.rows.namedItem(e);if(o){var j=a("td:eq("+i+")",o);if(b!==""||g===true){l=h.formatter(e,b,i,o,"edit");n=h.p.colModel[i].title?{title:a.jgrid.stripHtml(l)}:{};if(h.p.treeGrid&&a(".tree-wrap",a(j)).length>0)a("span",a(j)).html(l).attr(n);else a(j).html(l).attr(n);if(h.p.datatype=="local"){var k=h.p.colModel[i],m;b=k.formatter&&typeof k.formatter==="string"&&k.formatter=="date"?a.unformat.date(b,k):b;m=h.p._index[e];if(typeof m!="undefined")h.p.data[m][k.name]=b}}if(typeof c==="string")a(j).addClass(c);else c&&a(j).css(c);typeof f==="object"&&a(j).attr(f)}}})},getCell:function(d,b){var c=false;this.each(function(){var g=this,e=-1;if(!g.grid)return;if(isNaN(b))a(g.p.colModel).each(function(a){if(this.name===b){e=a;return false}});else e=parseInt(b,10);if(e>=0){var f=g.rows.namedItem(d);if(f)try{c=a.unformat(a("td:eq("+e+")",f),{rowId:f.id,colModel:g.p.colModel[e]},e)}catch(h){c=a.jgrid.htmlDecode(a("td:eq("+e+")",f).html())}}});return c},getCol:function(f,e,c){var b=[],d,g=0;e=typeof e!="boolean"?false:e;if(typeof c=="undefined")c=false;this.each(function(){var h=this,j=-1;if(!h.grid)return;if(isNaN(f))a(h.p.colModel).each(function(a){if(this.name===f){j=a;return false}});else j=parseInt(f,10);if(j>=0){var k=h.rows.length,i=0;if(k&&k>0){while(i<k){if(a(h.rows[i]).hasClass("jqgrow")){try{d=a.unformat(a(h.rows[i].cells[j]),{rowId:h.rows[i].id,colModel:h.p.colModel[j]},j)}catch(l){d=a.jgrid.htmlDecode(h.rows[i].cells[j].innerHTML)}if(c)g+=parseFloat(d);else if(e)b.push({id:h.rows[i].id,value:d});else b[i]=d}i++}if(c)switch(c.toLowerCase()){case"sum":b=g;break;case"avg":b=g/k;break;case"count":b=k}}}});return b},clearGridData:function(b){return this.each(function(){var c=this;if(!c.grid)return;if(typeof b!="boolean")b=false;if(c.p.deepempty)a("#"+c.p.id+" tbody:first tr:gt(0)").remove();else{var d=a("#"+c.p.id+" tbody:first tr:first")[0];a("#"+c.p.id+" tbody:first").empty().append(d)}c.p.footerrow&&b&&a(".ui-jqgrid-ftable td",c.grid.sDiv).html("&#160;");c.p.selrow=null;c.p.selarrrow=[];c.p.savedRow=[];c.p.records=0;c.p.page=1;c.p.lastpage=0;c.p.reccount=0;c.p.data=[];c.p_index={};c.updatepager(true,false)})},getInd:function(c,d){var b=false,a;this.each(function(){a=this.rows.namedItem(c);if(a)b=d===true?a:a.rowIndex});return b}})})(jQuery);(function(a){a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove()},hideModal:function(c,b){b=a.extend({jqm:true,gb:""},b||{});if(b.onClose){var d=b.onClose(c);if(typeof d=="boolean"&&!d)return}if(a.fn.jqm&&b.jqm===true)a(c).attr("aria-hidden","true").jqmHide();else{if(b.gb!=="")try{a(".jqgrid-overlay:first",b.gb).hide()}catch(e){}a(c).hide().attr("aria-hidden","true")}},findPos:function(a){var b=0,c=0;if(a.offsetParent)do{b+=a.offsetLeft;c+=a.offsetTop}while(a=a.offsetParent);return[b,c]},createModal:function(d,q,b,k,p,l){var c=document.createElement("div"),g,o=this;g=a(b.gbox).attr("dir")=="rtl"?true:false;c.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";c.id=d.themodal;var e=document.createElement("div");e.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";e.id=d.modalhead;a(e).append("<span class='ui-jqdialog-title'>"+b.caption+"</span>");var h=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(e).append(h);if(g){c.dir="rtl";a(".ui-jqdialog-title",e).css("float","right");a(".ui-jqdialog-titlebar-close",e).css("left",.3+"em")}else{c.dir="ltr";a(".ui-jqdialog-title",e).css("float","left");a(".ui-jqdialog-titlebar-close",e).css("right",.3+"em")}var j=document.createElement("div");a(j).addClass("ui-jqdialog-content ui-widget-content").attr("id",d.modalcontent);a(j).append(q);c.appendChild(j);a(c).prepend(e);if(l===true)a("body").append(c);else a(c).insertBefore(k);if(typeof b.jqModal==="undefined")b.jqModal=true;var f={};if(a.fn.jqm&&b.jqModal===true){if(b.left===0&&b.top===0){var i=[];i=this.findPos(p);b.left=i[0]+4;b.top=i[1]+4}f.top=b.top+"px";f.left=b.left}else if(b.left!==0||b.top!==0){f.left=b.left;f.top=b.top+"px"}a("a.ui-jqdialog-titlebar-close",e).click(function(){var e=a("#"+d.themodal).data("onClose")||b.onClose,c=a("#"+d.themodal).data("gbox")||b.gbox;o.hideModal("#"+d.themodal,{gb:c,jqm:b.jqModal,onClose:e});return false});if(b.width===0||!b.width)b.width=300;if(b.height===0||!b.height)b.height=200;if(!b.zIndex){var m=a(k).parents("*[role=dialog]").first().css("z-index");if(m)b.zIndex=parseInt(m)+1;else b.zIndex=950}var n=0;if(g&&f.left&&!l){n=a(b.gbox).width()-(!isNaN(b.width)?parseInt(b.width,10):0)-8;f.left=parseInt(f.left,10)+parseInt(n,10)}if(f.left)f.left+="px";a(c).css(a.extend({width:isNaN(b.width)?"auto":b.width+"px",height:isNaN(b.height)?"auto":b.height+"px",zIndex:b.zIndex,overflow:"hidden"},f)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":d.modalhead,"aria-hidden":"true"});if(typeof b.drag=="undefined")b.drag=true;if(typeof b.resize=="undefined")b.resize=true;if(b.drag){a(e).css("cursor","move");if(a.fn.jqDrag)a(c).jqDrag(e);else try{a(c).draggable({handle:a("#"+e.id)})}catch(r){}}if(b.resize)if(a.fn.jqResize){a(c).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>");a("#"+d.themodal).jqResize(".jqResize",d.scrollelm?"#"+d.scrollelm:false)}else try{a(c).resizable({handles:"se, sw",alsoResize:d.scrollelm?"#"+d.scrollelm:false})}catch(r){}b.closeOnEscape===true&&a(c).keydown(function(e){if(e.which==27){var c=a("#"+d.themodal).data("onClose")||b.onClose;o.hideModal(this,{gb:b.gbox,jqm:b.jqModal,onClose:c})}})},viewModal:function(c,b){b=a.extend({toTop:true,overlay:10,modal:false,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:true,jqM:true},b||{});if(a.fn.jqm&&b.jqm===true)if(b.jqM)a(c).attr("aria-hidden","false").jqm(b).jqmShow();else a(c).attr("aria-hidden","false").jqmShow();else{if(b.gbox!==""){a(".jqgrid-overlay:first",b.gbox).show();a(c).data("gbox",b.gbox)}a(c).show().attr("aria-hidden","false");try{a(":input:visible",c)[0].focus()}catch(d){}}},info_dialog:function(i,j,g,h){var b={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+i+"</b>",left:250,top:170,zIndex:1e3,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};a.extend(b,h||{});var e=b.jqModal,k=this;if(a.fn.jqm&&!e)e=false;var d="";if(b.buttons.length>0)for(var c=0;c<b.buttons.length;c++){if(typeof b.buttons[c].id=="undefined")b.buttons[c].id="info_button_"+c;d+="<a href='javascript:void(0)' id='"+b.buttons[c].id+"' class='fm-button ui-state-default ui-corner-all'>"+b.buttons[c].text+"</a>"}var m=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",l="text-align:"+b.align+";",f="<div id='info_id'>";f+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+m+";"+l+"'>"+j+"</div>";f+=g?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+b.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+g+"</a>"+d+"</div>":d!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+b.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+d+"</div>":"";f+="</div>";try{a("#info_dialog").attr("aria-hidden")=="false"&&this.hideModal("#info_dialog",{jqm:e});a("#info_dialog").remove()}catch(n){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},f,b,"","",true);d&&a.each(b.buttons,function(c){a("#"+this.id,"#info_id").bind("click",function(){b.buttons[c].onClick.call(a("#info_dialog"));return false})});a("#closedialog","#info_id").click(function(){k.hideModal("#info_dialog",{jqm:e});return false});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(b.beforeOpen)&&b.beforeOpen();this.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove();a.o&&a.o.remove()},modal:b.modal,jqm:e});a.isFunction(b.afterOpen)&&b.afterOpen();try{a("#info_dialog").focus()}catch(n){}},createEl:function(k,b,d,r,t){var c="";if(b.defaultValue)delete b.defaultValue;function j(c,b){if(a.isFunction(b.dataInit)){c.id=b.id;b.dataInit(c);delete b.id;delete b.dataInit}if(b.dataEvents){a.each(b.dataEvents,function(){if(this.data!==undefined)a(c).bind(this.type,this.data,this.fn);else a(c).bind(this.type,this.fn)});delete b.dataEvents}return b}switch(k){case"textarea":c=document.createElement("textarea");if(r)!b.cols&&a(c).css({width:"98%"});else if(!b.cols)b.cols=20;if(!b.rows)b.rows=2;if(d=="&nbsp;"||d=="&#160;"||d.length==1&&d.charCodeAt(0)==160)d="";c.value=d;b=j(c,b);a(c).attr(b).attr({role:"textbox",multiline:"true"});break;case"checkbox":c=document.createElement("input");c.type="checkbox";if(!b.value){var s=d.toLowerCase();if(s.search(/(false|0|no|off|undefined)/i)<0&&s!==""){c.checked=true;c.defaultChecked=true;c.value=d}else c.value="on";a(c).attr("offval","off")}else{var o=b.value.split(":");if(d===o[0]){c.checked=true;c.defaultChecked=true}c.value=o[0];a(c).attr("offval",o[1]);try{delete b.value}catch(u){}}b=j(c,b);a(c).attr(b).attr("role","checkbox");break;case"select":c=document.createElement("select");c.setAttribute("role","select");var g,f=[];if(b.multiple===true){g=true;c.multiple="multiple";a(c).attr("aria-multiselectable","true")}else g=false;if(typeof b.dataUrl!="undefined")a.ajax(a.extend({url:b.dataUrl,type:"GET",dataType:"html",success:function(h){try{delete b.dataUrl;delete b.value}catch(l){}var e;if(typeof b.buildSelect!="undefined"){var i=b.buildSelect(h);e=a(i).html();delete b.buildSelect}else e=a(h).html();if(e){a(c).append(e);b=j(c,b);if(typeof b.size==="undefined")b.size=g?3:1;if(g){f=d.split(",");f=a.map(f,function(b){return a.trim(b)})}else f[0]=a.trim(d);a(c).attr(b);setTimeout(function(){a("option",c).each(function(b){if(b===0)this.selected="";a(this).attr("role","option");if(a.inArray(a.trim(a(this).text()),f)>-1||a.inArray(a.trim(a(this).val()),f)>-1){this.selected="selected";if(!g)return false}})},0)}}},t||{}));else if(b.value){var n;if(g){f=d.split(",");f=a.map(f,function(b){return a.trim(b)});if(typeof b.size==="undefined")b.size=3}else b.size=1;if(typeof b.value==="function")b.value=b.value();var q,h,e;if(typeof b.value==="string"){q=b.value.split(";");for(n=0;n<q.length;n++){h=q[n].split(":");if(h.length>2)h[1]=a.map(h,function(b,a){if(a>0)return b}).join(":");e=document.createElement("option");e.setAttribute("role","option");e.value=h[0];e.innerHTML=h[1];if(!g&&(a.trim(h[0])==a.trim(d)||a.trim(h[1])==a.trim(d)))e.selected="selected";if(g&&(a.inArray(a.trim(h[1]),f)>-1||a.inArray(a.trim(h[0]),f)>-1))e.selected="selected";c.appendChild(e)}}else if(typeof b.value==="object"){var l=b.value;for(var i in l)if(l.hasOwnProperty(i)){e=document.createElement("option");e.setAttribute("role","option");e.value=i;e.innerHTML=l[i];if(!g&&(a.trim(i)==a.trim(d)||a.trim(l[i])==a.trim(d)))e.selected="selected";if(g&&(a.inArray(a.trim(l[i]),f)>-1||a.inArray(a.trim(i),f)>-1))e.selected="selected";c.appendChild(e)}}b=j(c,b);try{delete b.value}catch(u){}a(c).attr(b)}break;case"text":case"password":case"button":var p;if(k=="button")p="button";else p="textbox";c=document.createElement("input");c.type=k;c.value=d;b=j(c,b);if(k!="button")if(r)!b.size&&a(c).css({width:"98%"});else if(!b.size)b.size=20;a(c).attr(b).attr("role",p);break;case"image":case"file":c=document.createElement("input");c.type=k;b=j(c,b);a(c).attr(b);break;case"custom":c=document.createElement("span");try{if(a.isFunction(b.custom_element)){var m=b.custom_element.call(this,d,b);if(m){m=a(m).addClass("customelement").attr({id:b.id,name:b.name});a(c).empty().append(m)}else throw"e2";}else throw"e1";}catch(u){u=="e1"&&this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose);if(u=="e2")this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose);else this.info_dialog(a.jgrid.errors.errcap,typeof u==="string"?u:u.message,a.jgrid.edit.bClose)}}return c},checkDate:function(a,i){var k=function(a){return a%4===0&&(a%100!==0||a%400===0)?29:28},m=function(b){for(var a=1;a<=b;a++){this[a]=31;if(a==4||a==6||a==9||a==11)this[a]=30;if(a==2)this[a]=29}return this},b={},j;a=a.toLowerCase();if(a.indexOf("/")!=-1)j="/";else if(a.indexOf("-")!=-1)j="-";else if(a.indexOf(".")!=-1)j=".";else j="/";a=a.split(j);i=i.split(j);if(i.length!=3)return false;for(var e=-1,c,g=-1,h=-1,d=0;d<a.length;d++){var n=isNaN(i[d])?0:parseInt(i[d],10);b[a[d]]=n;c=a[d];if(c.indexOf("y")!=-1)e=d;if(c.indexOf("m")!=-1)h=d;if(c.indexOf("d")!=-1)g=d}if(a[e]=="y"||a[e]=="yyyy")c=4;else if(a[e]=="yy")c=2;else c=-1;var l=m(12),f;if(e===-1)return false;else{f=b[a[e]].toString();if(c==2&&f.length==1)c=1;if(f.length!=c||b[a[e]]===0&&i[e]!="00")return false}if(h===-1)return false;else{f=b[a[h]].toString();if(f.length<1||b[a[h]]<1||b[a[h]]>12)return false}if(g===-1)return false;else{f=b[a[g]].toString();if(f.length<1||b[a[g]]<1||b[a[g]]>31||b[a[h]]==2&&b[a[g]]>k(b[a[e]])||b[a[g]]>l[b[a[h]]])return false}return true},isEmpty:function(a){return a.match(/^\s+$/)||a===""?true:false},checkTime:function(b){var c=/^(\d{1,2}):(\d{2})([ap]m)?$/,a;if(!this.isEmpty(b)){a=b.match(c);if(a){if(a[3]){if(a[1]<1||a[1]>12)return false}else if(a[1]>23)return false;if(a[2]>59)return false}else return false}return true},checkValues:function(c,f,e){var b,h,d,j,k;if(typeof f=="string"){for(h=0,k=e.p.colModel.length;h<k;h++)if(e.p.colModel[h].name==f){b=e.p.colModel[h].editrules;f=h;try{d=e.p.colModel[h].formoptions.label}catch(m){}break}}else if(f>=0)b=e.p.colModel[f].editrules;if(b){if(!d)d=e.p.colNames[f];if(b.required===true)if(this.isEmpty(c))return[false,d+": "+a.jgrid.edit.msg.required,""];var g=b.required===false?false:true;if(b.number===true)if(!(g===false&&this.isEmpty(c)))if(isNaN(c))return[false,d+": "+a.jgrid.edit.msg.number,""];if(typeof b.minValue!="undefined"&&!isNaN(b.minValue))if(parseFloat(c)<parseFloat(b.minValue))return[false,d+": "+a.jgrid.edit.msg.minValue+" "+b.minValue,""];if(typeof b.maxValue!="undefined"&&!isNaN(b.maxValue))if(parseFloat(c)>parseFloat(b.maxValue))return[false,d+": "+a.jgrid.edit.msg.maxValue+" "+b.maxValue,""];var i;if(b.email===true)if(!(g===false&&this.isEmpty(c))){i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!i.test(c))return[false,d+": "+a.jgrid.edit.msg.email,""]}if(b.integer===true)if(!(g===false&&this.isEmpty(c))){if(isNaN(c))return[false,d+": "+a.jgrid.edit.msg.integer,""];if(c%1!==0||c.indexOf(".")!=-1)return[false,d+": "+a.jgrid.edit.msg.integer,""]}if(b.date===true)if(!(g===false&&this.isEmpty(c))){if(e.p.colModel[f].formatoptions&&e.p.colModel[f].formatoptions.newformat)j=e.p.colModel[f].formatoptions.newformat;else j=e.p.colModel[f].datefmt||"Y-m-d";if(!this.checkDate(j,c))return[false,d+": "+a.jgrid.edit.msg.date+" - "+j,""]}if(b.time===true)if(!(g===false&&this.isEmpty(c)))if(!this.checkTime(c))return[false,d+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(b.url===true)if(!(g===false&&this.isEmpty(c))){i=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!i.test(c))return[false,d+": "+a.jgrid.edit.msg.url,""]}if(b.custom===true)if(!(g===false&&this.isEmpty(c)))if(a.isFunction(b.custom_func)){var l=b.custom_func.call(e,c,d);return a.isArray(l)?l:[false,a.jgrid.edit.msg.customarray,""]}else return[false,a.jgrid.edit.msg.customfcheck,""]}return[true,"",""]}})})(jQuery);(function(a){var b=null;a.jgrid.extend({navGrid:function(c,b){b=a.extend({refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",print:true,printicon:"ui-icon-print",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false},a.jgrid.nav,b||{});return this.each(function(){var o={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},d=this,k,j,h,m;if(!d.grid||typeof c!="string")return;if(a("#"+o.themodal).html()===null){if(typeof window.innerWidth!="undefined"){k=window.innerWidth;j=window.innerHeight}else if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0){k=document.documentElement.clientWidth;j=document.documentElement.clientHeight}else{k=1024;j=768}a.jgrid.createModal(o,"<div>"+b.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+d.p.id,jqModal:true,drag:true,resize:true,caption:b.alertcap,top:j/2-25,left:k/2-100,width:200,height:"auto",closeOnEscape:b.closeOnEscape},"","",true)}var l=1;if(b.cloneToTop&&d.p.toppager)l=2;for(var n=0;n<l;n++){var e,f=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),p="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",g,i;if(n===0){g=c;i=d.p.id;if(g==d.p.toppager){i+="_top";l=1}}else{g=d.p.toppager;i=d.p.id+"_top"}d.p.direction=="rtl"&&a(f).attr("dir","rtl").css("float","right");if(b.refresh){e=a("<td class='ui-pg-button ui-corner-all'></td>");a(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.refreshicon+"'></span>"+b.refreshtext+"</div>");a("tr",f).append(e);a(e,f).attr({title:b.refreshtitle||"",id:"refresh_"+i}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(b.beforeRefresh)&&b.beforeRefresh();d.p.search=false;try{var c=d.p.id;a("#fbox_"+c).searchFilter().reset({reload:false});a.isFunction(d.clearToolbar)&&d.clearToolbar(false)}catch(e){}switch(b.refreshstate){case"firstpage":a(d).trigger("reloadGrid",[{page:1}]);break;case"current":a(d).trigger("reloadGrid",[{current:true}])}a.isFunction(b.afterRefresh)&&b.afterRefresh()}return false}).hover(function(){!a(this).hasClass("ui-state-disabled")&&a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});e=null}if(b.print){e=a("<td class='ui-pg-button ui-corner-all'></td>");a(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.printicon+"'></span>"+(b.printtext||"")+"</div>");a("tr",f).append(e);a(e,f).attr({title:b.printtitle||"",id:"print_"+i}).click(function(){for(var b=d.p,g="",f="",h=0;h<b.colModel.length;h++){var i=b.colModel[h].name;if(b.colModel[h].hidden==false){if(i!=="cb"&&i!=="subgrid"&&i!=="rn")g+=i+",";var k=b.colNames[h];if(k!==""&&k!==" "&&k.indexOf("checkbox")==-1)f+=k+","}}g=g.substring(0,g.length-1);f=f.substring(0,f.length-1);var m=0,l=a(d).getDataIDs(),c="{'rowTotal':'"+l.length+"',";if(l){a.each(l,function(e,d){m=m+1;c=c+"'"+m+"':{";var b=jQuery("#mainGrid").getRowData(d);a.each(b,function(b,a){a=a.replace(/<\/?[^>]*>/g,"");a=a.replace(/[ | ]*\n/g,"\n");c=c+"'"+b+"':'"+a+"',"});c=c.substring(0,c.length-1)+"},"});c=c.substring(0,c.length-1)+"}"}var e=a("#formExportExcel");if(e.length==0){if(!b.exportUrl){var j=b.url.indexOf("!");if(j!=-1)b.exportUrl=b.url.substring(0,j)+"!export.action";else{j=b.url.indexOf(".action");b.exportUrl=b.url.substring(0,j)+"!export.action"}}e=a("<form id='formExportExcel'><input id='jQGridData' name='jQGridData' type='hidden'><input id='cols' name='cols' type='hidden'><input id='colNames' name='colNames' type='hidden'></form>").attr("action",b.exportUrl).attr("target","fmExport").attr("method","POST").appendTo(a("body"))}a("#jQGridData",e).val(c);a("#cols",e).val(g);a("#colNames",e).val(f);e.submit()}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});e=null}m=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+m+";visibility:hidden;' ></div>");h=a(f).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(g+"_"+b.position,g).append(f);if(d.p._nvtd){if(h>d.p._nvtd[0]){a(g+"_"+b.position,g).width(h);d.p._nvtd[0]=h}d.p._nvtd[1]=h}m=null;h=null;f=null}})},navButtonAdd:function(c,b){b=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},b||{});return this.each(function(){if(!this.grid)return;if(c.indexOf("#")!==0)c="#"+c;var e=a(".navtable",c)[0],f=this;if(e){var d=a("<td></td>");if(b.buttonicon.toString().toUpperCase()=="NONE")a(d).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+b.caption+"</div>");else a(d).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+b.buttonicon+"'></span>"+b.caption+"</div>");b.id&&a(d).attr("id",b.id);if(b.position=="first")if(e.rows[0].cells.length===0)a("tr",e).append(d);else a("tr td:eq(0)",e).before(d);else a("tr",e).append(d);a(d,e).attr("title",b.title||"").click(function(c){if(!a(this).hasClass("ui-state-disabled"))a.isFunction(b.onClickButton)&&b.onClickButton.call(f,c);return false}).hover(function(){!a(this).hasClass("ui-state-disabled")&&a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}})}})})(jQuery);(function(a){a.fmatter={};a.extend(a.fmatter,{isBoolean:function(a){return typeof a==="boolean"},isObject:function(b){return b&&(typeof b==="object"||a.isFunction(b))||false},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a==="number"&&isFinite(a)},isNull:function(a){return a===null},isUndefined:function(a){return typeof a==="undefined"},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(b){if(!this.isString(b)&&this.isValue(b))return false;else if(!this.isValue(b))return true;b=a.trim(b).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return b===""}});a.fn.fmatter=function(c,d,b,g,f){var e=d;b=a.extend({},a.jgrid.formatter,b);if(a.fn.fmatter[c])e=a.fn.fmatter[c](d,b,g,f);return e};a.fmatter.util={NumberFormat:function(e,d){if(!a.fmatter.isNumber(e))e*=1;if(a.fmatter.isNumber(e)){var m=e<0,b=e+"",h=d.decimalSeparator?d.decimalSeparator:".",c;if(a.fmatter.isNumber(d.decimalPlaces)){var i=d.decimalPlaces,j=Math.pow(10,i);b=Math.round(e*j)/j+"";c=b.lastIndexOf(".");if(i>0){if(c<0){b+=h;c=b.length-1}else if(h!==".")b=b.replace(".",h);while(b.length-1-c<i)b+="0"}}if(d.thousandsSeparator){var l=d.thousandsSeparator;c=b.lastIndexOf(h);c=c>-1?c:b.length;for(var f=b.substring(c),k=-1,g=c;g>0;g--){k++;if(k%3===0&&g!==c&&(!m||g>1))f=l+f;f=b.charAt(g-1)+f}b=f}b=d.prefix?d.prefix+b:b;b=d.suffix?b+d.suffix:b;return b}else return e},DateFormat:function(g,d,k,f){var B=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,A=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,z=/[^-+\dA-Z]/g,y=new RegExp("^/Date((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?)/$"),l=d.match(y),j=function(a,b){a=String(a);b=parseInt(b,10)||2;while(a.length<b)a="0"+a;return a},b={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},c=0,h,e,x,i=["i18n"];i.i18n={dayNames:f.dayNames,monthNames:f.monthNames};if(g in f.masks)g=f.masks[g];if(d.constructor===Number)c=new Date(d);else if(d.constructor===Date)c=d;else if(l!==null){c=new Date(parseInt(l[1],10));if(l[3]){var t=Number(l[5])*60+Number(l[6]);t*=l[4]=="-"?1:-1;t-=c.getTimezoneOffset();c.setTime(Number(Number(c)+t*60*1e3))}}else{d=d.split(/[\\\/:_;.,\t\T\s-]/);g=g.split(/[\\\/:_;.,\t\T\s-]/);for(e=0,x=g.length;e<x;e++){if(g[e]=="M"){h=a.inArray(d[e],i.i18n.monthNames);if(h!==-1&&h<12)d[e]=h+1}if(g[e]=="F"){h=a.inArray(d[e],i.i18n.monthNames);if(h!==-1&&h>11)d[e]=h+1-12}if(d[e])b[g[e].toLowerCase()]=parseInt(d[e],10)}if(b.f)b.m=b.f;if(b.m===0&&b.y===0&&b.d===0)return"&#160;";b.m=parseInt(b.m,10)-1;var p=b.y;if(p>=70&&p<=99)b.y=1900+b.y;else if(p>=0&&p<=69)b.y=2e3+b.y;c=new Date(b.y,b.m,b.d,b.h,b.i,b.s,b.u)}if(k in f.masks)k=f.masks[k];else if(!k)k="Y-m-d";var m=c.getHours(),C=c.getMinutes(),q=c.getDate(),n=c.getMonth()+1,u=c.getTimezoneOffset(),D=c.getSeconds(),E=c.getMilliseconds(),s=c.getDay(),o=c.getFullYear(),r=(s+6)%7+1,v=(new Date(o,n-1,q)-new Date(o,0,1))/8.64e7,w={d:j(q),D:i.i18n.dayNames[s],j:q,l:i.i18n.dayNames[s+7],N:r,S:f.S(q),w:s,z:v,W:r<5?Math.floor((v+r-1)/7)+1:Math.floor((v+r-1)/7)||(((new Date(o-1,0,1)).getDay()+6)%7<4?53:52),F:i.i18n.monthNames[n-1+12],m:j(n),M:i.i18n.monthNames[n-1],n:n,t:"?",L:"?",o:"?",Y:o,y:String(o).substring(2),a:m<12?f.AmPm[0]:f.AmPm[1],A:m<12?f.AmPm[2]:f.AmPm[3],B:"?",g:m%12||12,G:m,h:j(m%12||12),H:j(m),i:j(C),s:j(D),u:E,e:"?",I:"?",O:(u>0?"-":"+")+j(Math.floor(Math.abs(u)/60)*100+Math.abs(u)%60,4),P:"?",T:(String(c).match(A)||[""]).pop().replace(z,""),Z:"?",c:"?",r:"?",U:Math.floor(c/1e3)};return k.replace(B,function(a){return a in w?w[a]:a.substring(1)})}};a.fn.fmatter.defaultFormat=function(b,c){return a.fmatter.isValue(b)&&b!==""?b:c.defaultValue?c.defaultValue:"&#160;"};a.fn.fmatter.email=function(b,c){return!a.fmatter.isEmpty(b)?'<a href="mailto:'+b+'">'+b+"</a>":a.fn.fmatter.defaultFormat(b,c)};a.fn.fmatter.checkbox=function(b,d){var c=a.extend({},d.checkbox),e;if(!a.fmatter.isUndefined(d.colModel.formatoptions))c=a.extend({},c,d.colModel.formatoptions);if(c.disabled===true)e='disabled="disabled"';else e="";if(a.fmatter.isEmpty(b)||a.fmatter.isUndefined(b))b=a.fn.fmatter.defaultFormat(b,c);b=b+"";b=b.toLowerCase();var f=b.search(/(false|0|no|off)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+f+' value="'+b+'" offval="no" '+e+"/>"};a.fn.fmatter.link=function(b,c){var d={target:c.target},e="";if(!a.fmatter.isUndefined(c.colModel.formatoptions))d=a.extend({},d,c.colModel.formatoptions);if(d.target)e="target="+d.target;return!a.fmatter.isEmpty(b)?"<a "+e+' href="'+b+'">'+b+"</a>":a.fn.fmatter.defaultFormat(b,c)};a.fn.fmatter.showlink=function(d,b){var c={baseLinkUrl:b.baseLinkUrl,showAction:b.showAction,addParam:b.addParam||"",target:b.target,idName:b.idName},e="",f;if(!a.fmatter.isUndefined(b.colModel.formatoptions))c=a.extend({},c,b.colModel.formatoptions);if(c.target)e="target="+c.target;f=c.baseLinkUrl+c.showAction+"?"+c.idName+"="+b.rowId+c.addParam;return a.fmatter.isString(d)||a.fmatter.isNumber(d)?"<a "+e+' href="'+f+'">'+d+"</a>":a.fn.fmatter.defaultFormat(d,b)};a.fn.fmatter.integer=function(d,c){var b=a.extend({},c.integer);if(!a.fmatter.isUndefined(c.colModel.formatoptions))b=a.extend({},b,c.colModel.formatoptions);return a.fmatter.isEmpty(d)?b.defaultValue:a.fmatter.util.NumberFormat(d,b)};a.fn.fmatter.number=function(d,c){var b=a.extend({},c.number);if(!a.fmatter.isUndefined(c.colModel.formatoptions))b=a.extend({},b,c.colModel.formatoptions);return a.fmatter.isEmpty(d)?b.defaultValue:a.fmatter.util.NumberFormat(d,b)};a.fn.fmatter.currency=function(d,c){var b=a.extend({},c.currency);if(!a.fmatter.isUndefined(c.colModel.formatoptions))b=a.extend({},b,c.colModel.formatoptions);return a.fmatter.isEmpty(d)?b.defaultValue:a.fmatter.util.NumberFormat(d,b)};a.fn.fmatter.date=function(d,c,f,e){var b=a.extend({},c.date);if(!a.fmatter.isUndefined(c.colModel.formatoptions))b=a.extend({},b,c.colModel.formatoptions);return!b.reformatAfterEdit&&e=="edit"?a.fn.fmatter.defaultFormat(d,c):!a.fmatter.isEmpty(d)?a.fmatter.util.DateFormat(b.srcformat,d,b.newformat,b):a.fn.fmatter.defaultFormat(d,c)};a.fn.fmatter.select=function(b,e){b=b+"";var c=false,g=[];if(!a.fmatter.isUndefined(e.colModel.formatoptions))c=e.colModel.formatoptions.value;else if(!a.fmatter.isUndefined(e.colModel.editoptions))c=e.colModel.editoptions.value;if(c){var h=e.colModel.editoptions.multiple===true?true:false,f=[],d;if(h){f=b.split(",");f=a.map(f,function(b){return a.trim(b)})}if(a.fmatter.isString(c))for(var j=c.split(";"),k=0,i=0;i<j.length;i++){d=j[i].split(":");if(d.length>2)d[1]=jQuery.map(d,function(b,a){if(a>0)return b}).join(":");if(h){if(jQuery.inArray(d[0],f)>-1){g[k]=d[1];k++}}else if(a.trim(d[0])==a.trim(b)){g[0]=d[1];break}}else if(a.fmatter.isObject(c))if(h)g=jQuery.map(f,function(a){return c[a]});else g[0]=c[b]||""}b=g.join(", ");return b===""?a.fn.fmatter.defaultFormat(b,e):b};a.fn.fmatter.rowactions=function(b,d,h,i){var c={keys:false,editbutton:true,delbutton:true,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{oper:"edit"},url:null,delOptions:{}},g=a("#"+d)[0].p.colModel[i];if(!a.fmatter.isUndefined(g.formatoptions))c=a.extend(c,g.formatoptions);var f=function(e){c.afterSave&&c.afterSave(e);a("tr#"+b+" div.ui-inline-edit, tr#"+b+" div.ui-inline-del","#"+d).show();a("tr#"+b+" div.ui-inline-save, tr#"+b+" div.ui-inline-cancel","#"+d).hide()},e=function(e){c.afterRestore&&c.afterRestore(e);a("tr#"+b+" div.ui-inline-edit, tr#"+b+" div.ui-inline-del","#"+d).show();a("tr#"+b+" div.ui-inline-save, tr#"+b+" div.ui-inline-cancel","#"+d).hide()};switch(h){case"edit":a("#"+d).jqGrid("editRow",b,c.keys,c.onEdit,c.onSuccess,c.url,c.extraparam,f,c.onError,e);a("tr#"+b+" div.ui-inline-edit, tr#"+b+" div.ui-inline-del","#"+d).hide();a("tr#"+b+" div.ui-inline-save, tr#"+b+" div.ui-inline-cancel","#"+d).show();break;case"save":a("#"+d).jqGrid("saveRow",b,c.onSuccess,c.url,c.extraparam,f,c.onError,e);a("tr#"+b+" div.ui-inline-edit, tr#"+b+" div.ui-inline-del","#"+d).show();a("tr#"+b+" div.ui-inline-save, tr#"+b+" div.ui-inline-cancel","#"+d).hide();break;case"cancel":a("#"+d).jqGrid("restoreRow",b,e);a("tr#"+b+" div.ui-inline-edit, tr#"+b+" div.ui-inline-del","#"+d).show();a("tr#"+b+" div.ui-inline-save, tr#"+b+" div.ui-inline-cancel","#"+d).hide();break;case"del":a("#"+d).jqGrid("delGridRow",b,c.delOptions)}};a.fn.fmatter.actions=function(g,b){var f={keys:false,editbutton:true,delbutton:true};if(!a.fmatter.isUndefined(b.colModel.formatoptions))f=a.extend(f,b.colModel.formatoptions);var e=b.rowId,c="",d;if(typeof e=="undefined"||a.fmatter.isEmpty(e))return"";if(f.editbutton){d="onclick=$.fn.fmatter.rowactions('"+e+"','"+b.gid+"','edit',"+b.pos+");";c=c+"<div style='margin-left:8px;'><div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+d+"><span class='ui-icon ui-icon-pencil'></span></div>"}if(f.delbutton){d="onclick=$.fn.fmatter.rowactions('"+e+"','"+b.gid+"','del',"+b.pos+");";c=c+"<div title='"+a.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+d+"><span class='ui-icon ui-icon-trash'></span></div>"}d="onclick=$.fn.fmatter.rowactions('"+e+"','"+b.gid+"','save',"+b.pos+");";c=c+"<div title='"+a.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save'><span class='ui-icon ui-icon-disk' "+d+"></span></div>";d="onclick=$.fn.fmatter.rowactions('"+e+"','"+b.gid+"','cancel',"+b.pos+");";c=c+"<div title='"+a.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel'><span class='ui-icon ui-icon-cancel' "+d+"></span></div></div>";return c};a.unformat=function(c,e,n,m){var d,h=e.colModel.formatter,b=e.colModel.formatoptions||{},g,k=/([\.\*\_\'\(\)\{\}\+\?\\])/g,i=e.colModel.unformat||a.fn.fmatter[h]&&a.fn.fmatter[h].unformat;if(typeof i!=="undefined"&&a.isFunction(i))d=i(a(c).text(),e,c);else if(!a.fmatter.isUndefined(h)&&a.fmatter.isString(h)){var j=a.jgrid.formatter||{},f;switch(h){case"integer":b=a.extend({},j.integer,b);g=b.thousandsSeparator.replace(k,"\\$1");f=new RegExp(g,"g");d=a(c).text().replace(f,"");break;case"number":b=a.extend({},j.number,b);g=b.thousandsSeparator.replace(k,"\\$1");f=new RegExp(g,"g");d=a(c).text().replace(f,"").replace(b.decimalSeparator,".");break;case"currency":b=a.extend({},j.currency,b);g=b.thousandsSeparator.replace(k,"\\$1");f=new RegExp(g,"g");d=a(c).text().replace(f,"").replace(b.decimalSeparator,".").replace(b.prefix,"").replace(b.suffix,"");break;case"checkbox":var l=e.colModel.editoptions?e.colModel.editoptions.value.split(":"):["Yes","No"];d=a("input",c).attr("checked")?l[0]:l[1];break;case"select":d=a.unformat.select(c,e,n,m);break;case"actions":return"";default:d=a(c).text()}}return d?d:m===true?a(c).text():a.jgrid.htmlDecode(a(c).html())};a.unformat.select=function(l,m,o,n){var f=[],e=a(l).text();if(n===true)return e;var h=a.extend({},m.colModel.editoptions);if(h.value){var d=h.value,g=h.multiple===true?true:false,c=[],b;if(g){c=e.split(",");c=a.map(c,function(b){return a.trim(b)})}if(a.fmatter.isString(d))for(var j=d.split(";"),k=0,i=0;i<j.length;i++){b=j[i].split(":");if(b.length>2)b[1]=jQuery.map(b,function(b,a){if(a>0)return b}).join(":");if(g){if(jQuery.inArray(b[1],c)>-1){f[k]=b[0];k++}}else if(a.trim(b[1])==a.trim(e)){f[0]=b[0];break}}else if(a.fmatter.isObject(d)||a.isArray(d)){if(!g)c[0]=e;f=jQuery.map(c,function(c){var b;a.each(d,function(d,a){if(a==c){b=d;return false}});if(typeof b!="undefined")return b})}return f.join(", ")}else return e||""};a.unformat.date=function(c,d){var b=a.jgrid.formatter.date||{};if(!a.fmatter.isUndefined(d.formatoptions))b=a.extend({},b,d.formatoptions);return!a.fmatter.isEmpty(c)?a.fmatter.util.DateFormat(b.newformat,c,b.srcformat,b):a.fn.fmatter.defaultFormat(c,d)}})(jQuery)